"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4960],{3615:(e,t,i)=>{i.d(t,{A:()=>l});var a=i(77232),n=i(14232),s=i(5696),r=i(48940),o=i(92336);let l=e=>{let{setWindowStates:t}=(0,o.w)(),{processes:{[e]:{lockAspectRatio:i=!1,maximized:l=!1}={}}={}}=(0,r.N)(),{sizes:{titleBar:d}}=(0,a.DP)();return{updateWindowSize:(0,n.useCallback)((a,n)=>t(t=>({...t,[e]:{...t?.[e],maximized:l,size:(0,s.WZ)({height:a+d.height,width:n},i)}})),[e,i,l,t,d.height])}}},5696:(e,t,i)=>{i.d(t,{Gn:()=>r,Ve:()=>d,WZ:()=>c,Xc:()=>l,r_:()=>o});var a=i(68660),n=i(65266),s=i(4622);let r=(e,t,i=[],a=0)=>{let[r]=e.split(n.QB),o=`${r}${n.QB}`,l=i.find(e=>e.startsWith(o))||"",{componentWindow:d}=t?.[l]||{},{x:c=0,y:u=0,width:h=0,height:w=0}=d?.getBoundingClientRect()||{};return!(c+a+h>(0,s.e8)()||u+a+w>(0,s.Bv)())&&(c||u)?{x:c+a,y:u+a}:void 0},o=({height:e,width:t})=>{let[i,a]=[(0,s.Bv)(),(0,s.e8)()];return{x:Math.floor(a/2-(0,s.kl)(t)/2),y:Math.floor((i-n.D5)/2-(0,s.kl)(e)/2)}},l={BOTTOM:15,LEFT:150,RIGHT:50,TOP:15},d=(e,t,i=!1)=>{let{position:a,size:n}=e||{},{x:r=0,y:o=0}=a||{},{height:d=0,width:c=0}=n||{};return i?r+l.RIGHT>t.x||r+(0,s.kl)(c)-l.LEFT<0||o+l.BOTTOM>t.y||o+l.TOP<0:r<0||o<0||r+(0,s.kl)(c)>t.x||o+(0,s.kl)(d)>t.y},c=(e,t)=>{let i=Number(e.height),r=Number(e.width),[o,l]=[(0,s.Bv)(),(0,s.e8)()],d=o-n.D5,c=Math.max(a.WB,Math.min(i,d)),u=Math.max(a.lH,Math.min(r,l));if(!t)return{height:c,width:u};let h=i===c,w=r===u;return h||w?h?w?{height:c,width:u}:{height:Math.round(c/(r/u)),width:u}:{height:c,width:Math.round(u/(i/c))}:i>r?{height:c,width:Math.round(u/(d/c))}:{height:Math.round(c/(l/u)),width:u}}},28124:(e,t,i)=>{i.d(t,{A:()=>a});let a=i(77232).Ay.div.withConfig({componentId:"sc-83f4cbe3-0"})(['cursor:wait;height:100%;width:100%;&::before{color:#fff;content:"Working on it...";display:flex;font-size:12px;font-weight:200;justify-content:center;letter-spacing:0.3px;mix-blend-mode:difference;padding-top:',"px;}"],({$hasColumns:e,theme:t})=>e?t.sizes.window.textTopPadding+t.sizes.fileManager.columnHeight:t.sizes.window.textTopPadding)},36107:(e,t,i)=>{i.d(t,{$:()=>r,v:()=>s});let a="DEFAULT",n="__setter__",s=e=>e.forEach(e=>{if(e in window)try{delete window[e]}finally{Object.assign(window,{[e]:void 0})}}),r=(e,t,i)=>{if(setTimeout(()=>{window.sharedGlobals&&e in window.sharedGlobals&&(window.sharedGlobals[e][n]=a)},i),window.sharedGlobals=window.sharedGlobals||{},e in window.sharedGlobals)window.sharedGlobals[e][n]=t;else{let i=window[e];window.sharedGlobals[e]={[a]:i,[n]:t},Object.defineProperty(window,e,{get(){if(window.sharedGlobals&&e in window.sharedGlobals){let{stack:t=""}=Error(),i=Object.keys(window.sharedGlobals[e]).filter(e=>![a,n].includes(e)).find(e=>new RegExp(e).test(t));return window.sharedGlobals[e][i||a]}return i},set(t){window.sharedGlobals&&e in window.sharedGlobals&&(window.sharedGlobals[e][window.sharedGlobals[e][n]]=t)}})}}},47825:(e,t,i)=>{i.d(t,{A:()=>c});var a=i(37876),n=i(14232),s=i(77232),r=i(28124),o=i(58196),l=i(48940);let d=s.Ay.div.withConfig({componentId:"sc-e37924df-0"})([""]),c=(0,n.memo)(({id:e,useHook:t,StyledComponent:i,children:s})=>{let{processes:{[e]:{url:c=""}={}}}=(0,l.N)(),u=(0,n.useRef)(null),[h,w]=(0,n.useState)(!0),f=(0,n.useMemo)(()=>({contain:"strict",visibility:h?"hidden":"visible"}),[h]);return t({containerRef:u,id:e,loading:h,setLoading:w,url:c}),(0,a.jsxs)(a.Fragment,{children:[h&&(0,a.jsx)(r.A,{}),(0,a.jsx)(i||d,{ref:u,style:f,...(0,o.A)({id:e}),children:s})]})})},58196:(e,t,i)=>{i.d(t,{A:()=>f});var a=i(79052),n=i(14232),s=i(58688),r=i(59029),o=i(35575),l=i(28229),d=i(48940),c=i(92336),u=i(65266),h=i(4622),w=i(65287);let f=({callback:e,directory:t=u.Bn,id:i,onDragLeave:f,onDragOver:p,updatePositions:m})=>{let{url:b}=(0,d.N)(),g=(0,w.w)(),{iconPositions:y,sortOrders:x,setIconPositions:v}=(0,c.w)(),{exists:k,mkdirRecursive:E,updateFolder:j,writeFile:C}=(0,l.f)(),A=(0,n.useCallback)(async(e,t,n)=>{if(i)if(t){let s=(0,a.join)(u.Bn,e);if(await E(u.Bn),await C(s,t,!0))return n===o.z.UPDATE_URL&&b(i,s),j(u.Bn,e),(0,a.basename)(s)}else n===o.z.UPDATE_URL&&b(i,e);return""},[i,E,j,b,C]),{openTransferDialog:$}=(0,s.A)();return{onDragLeave:f,onDragOver:(0,n.useCallback)(e=>{p?.(e),(0,h.CH)(e)},[p]),onDrop:(0,n.useCallback)(n=>{if(u.jj.has((0,h.uQ)(t)))return;if(n.target instanceof HTMLElement){if(n.target.closest(".focus-within")?.contains(n.target))return;if(m){let{files:e,text:i}=(0,r.bn)(n);if(0===e.length&&""===i)return;(async()=>{let s={x:n.clientX,y:n.clientY},r=[];if(i){try{r=JSON.parse(i)}catch{}if(!Array.isArray(r))return;let[e]=r;if(!e||e.startsWith(t)&&(0,a.basename)(e)===(0,a.relative)(t,e))return;r=r.map(e=>(0,a.basename)(e))}else r=e instanceof FileList?[...e].map(e=>e.name):[...e].map(e=>e.getAsFile()?.name||"").filter(Boolean);r=await (0,h.$I)(r,t,y,k),(0,h.$Y)(t,n.target,y,x,s,r,v,k)})()}}let s="string"==typeof i;s&&!m&&t===u.Bn&&g.current[i]?.componentWindow?.focus(u.VD),(0,r.nX)(n,e||A,t,$,s)},[e,t,k,y,i,$,g,v,x,m,A])}}},64960:(e,t,i)=>{i.r(t),i.d(t,{default:()=>$});var a=i(37876),n=i(14232);let s=i(77232).Ay.div.withConfig({componentId:"sc-18f301cd-0"})(["align-items:center;background-color:#000;display:flex;height:100%;width:100%;canvas{image-rendering:pixelated;image-rendering:crisp-edges;position:absolute;top:0 !important;touch-action:none;-webkit-touch-callout:none;user-select:none;width:100%;}div,video{display:none;}.emulator-mouse-overlay{display:block;inset:0;position:absolute;}"]);var r=i(79052);let o={emulatorFunction:"dosWorker"},l=["__core-js_shared__","compiled","core","emulatorsUi","exports","WDOSBOX","worker"],d=".zip.save",c={".jsdos/dosbox.conf":"/Program Files/js-dos/dosbox.conf",".jsdos/jsdos.json":"/Program Files/js-dos/jsdos.json"},u=new Set(["Alt","ContextMenu","F1","F3","F5","F6","F7","F10","F11","F12"]);var h=i(73100),w=i(28229),f=i(48940),p=i(65266),m=i(4622),b=i(36107),g=i(75970),y=i(82909).Buffer;let x=async(e,t)=>{let{addFileToZip:a,isFileInZip:n}=await i.e(8317,"high").then(i.bind(i,38317));return Object.entries(c).reduce(async(e,[i,s])=>{let r=await e;return r.length>0&&await n(r,i)?r:a(r,s,i,t)},Promise.resolve(e))};var v=i(74762),k=i(3615),E=i(92336);let j=e=>{u.has(e.key)&&e.preventDefault()},C=({containerRef:e,id:t,loading:a,setLoading:s,url:c})=>{let{updateWindowSize:u}=(0,k.A)(t),[C,A]=(0,n.useState)(),$=(0,v.A)(),T=(0,n.useRef)(!1),{foregroundId:F}=(0,E.w)(),S=((e,t,a,s)=>{let{appendFileToTitle:o}=(0,h.A)(e),{exists:c,readFile:u}=(0,w.f)(),{argument:v,linkElement:k,processes:{[e]:E}}=(0,f.N)(),{closing:j}=E||{},[C,A]=(0,n.useState)({}),{createSnapshot:$}=(0,g.p)(),T=(0,n.useCallback)(async(e,t,i=!1)=>{if(C[e]&&await $(`${(0,r.basename)(e)}${d}`,y.from(await C[e].persist()||[]),t),i)try{await s?.stop(),await C[e]?.exit()}catch{}},[$,C,s]),F=(0,n.useCallback)(async e=>{let t=await C[e]?.screenshot();return t?(0,m.Jf)(t):void 0},[C]),S=(0,n.useCallback)(async()=>{let n,[h]=Object.keys(C);"string"==typeof h&&(await T(h,await F(h)),A({[t]:void 0}));let w=t?await u(t):y.from(""),f=(0,m.uQ)(t),{zipAsync:g}=await i.e(8317,"high").then(i.bind(i,38317)),E=async e=>y.from(await g({[(0,r.basename)(t)]:e})),j=async e=>(0,m.Zd)(await x(e,u)),$=".exe"===f?await E(w):w;if(".jsdos"===f)n=(0,m.Zd)($);else try{n=await j($)}catch{n=await j(await E(w))}let S=(0,r.join)(p.Sb,`${(0,r.basename)(t)}${d}`),G=await c(S)?(0,m.Zd)(await u(S)):void 0,z=await s?.run(n,G);if(z){let i=a.current?.querySelector("canvas");i instanceof HTMLCanvasElement&&(k(e,"peekElement",i),A({[t]:z}),o((0,r.basename)(t)),v(e,"mute",()=>{z.mute(),v(e,"muted",!0)}),v(e,"unmute",()=>{z.unmute(),v(e,"muted",!1)}),(0,m.E)(n),G&&(0,m.E)(G),(0,b.v)(l))}},[o,v,T,a,C,s,c,e,k,u,F,t]);return(0,n.useEffect)(()=>(!E||j||!s||t in C||S(),()=>{if(j)if(t){let e=e=>{window.setTimeout(()=>T(t,e,j),p.UW.WINDOW)};F(t).then(e).catch(e)}else s?.stop()}),[T,j,C,s,S,E,F,t]),C[t]})(t,c,e,C),{closeWithTransition:G,processes:{[t]:{libs:z=[]}={}}={}}=(0,f.N)();(0,n.useEffect)(()=>{C||T.current||(T.current=!0,(0,m.aY)(z).then(()=>{if(window.emulators&&(window.emulators.pathPrefix="/Program Files/js-dos/",e.current)){let t=e.current.closest("section");t?.addEventListener("keydown",j,{capture:!0}),t?.addEventListener("keyup",j,{capture:!0}),t?.addEventListener("focus",()=>e.current?.focus(p.VD),{passive:!0}),A(window.Dos(e.current,o))}}))},[e,C,z]),(0,n.useEffect)(()=>{if(S&&a){u(S.height(),S.width());let i=S.events();i.onMessage((e,i)=>{if(i.startsWith("[LOG_EXEC]")){let[,e]=i.split("[LOG_EXEC]"),[a]=e.replace("Parsing command line: ","").split(" ");"EXIT"===a.toUpperCase()&&G(t)}}),i.onFrameSize(()=>{let t=e.current?.querySelector("canvas"),[i,a]=[(0,m.kl)(t?.style.width),(0,m.kl)(t?.style.height)],{height:n=0,width:s=0}=t?.getBoundingClientRect()||{};a&&i&&(a!==n||i!==s)&&u(a,i)}),i.onExit(()=>window.SimpleKeyboardInstances?.emulatorKeyboard?.destroy()),s(!1),$(window.JSDOS_FS,c?`JSDOS_${(0,r.basename)(c,(0,r.extname)(c))}`:t)}},[G,e,S,t,a,$,s,u,c]),(0,n.useLayoutEffect)(()=>{t!==F||a||e.current?.focus(p.VD)},[e,a,F,t])};var A=i(47825);let $=(0,n.memo)(({id:e})=>(0,a.jsx)(A.A,{StyledComponent:s,id:e,useHook:C}))},68660:(e,t,i)=>{i.d(t,{Ay:()=>o,EX:()=>n,Ho:()=>a,WB:()=>s,lH:()=>r});let a={bottom:!1,bottomLeft:!1,bottomRight:!1,left:!1,right:!1,top:!1,topLeft:!1,topRight:!1},n={bottom:!0,bottomLeft:!0,bottomRight:!0,left:!0,right:!0,top:!0,topLeft:!0,topRight:!0},s=30,r=166,o={cancel:".cancel",dragHandleClassName:"handle",enableUserSelectHack:!1,minHeight:`${s}px`,minWidth:`${r}px`,resizeHandleStyles:{bottom:{bottom:"-3px",cursor:"ns-resize",height:"6px"},bottomLeft:{bottom:"-3px",cursor:"nesw-resize",height:"12px",left:"-3px",width:"12px"},bottomRight:{bottom:"-3px",cursor:"nwse-resize",height:"12px",right:"-3px",width:"12px"},left:{cursor:"ew-resize",left:"-3px",width:"6px"},right:{cursor:"ew-resize",right:"-3px",width:"6px"},top:{cursor:"ns-resize",height:"6px",top:"-3px"},topLeft:{cursor:"nwse-resize",height:"12px",left:"-3px",top:"-3px",width:"12px"},topRight:{cursor:"nesw-resize",height:"12px",right:"-3px",top:"-3px",width:"12px"}}}},73100:(e,t,i)=>{i.d(t,{A:()=>o});var a=i(14232),n=i(48940),s=i(31157),r=i(65266);let o=e=>{let{title:t}=(0,n.N)(),[i]=(0,a.useMemo)(()=>e.split(r.QB),[e]),{title:o}=s.A[i]||{};return{appendFileToTitle:(0,a.useCallback)((i,a)=>{let n=i?` - ${i}${a?` ${r.g6}`:""}`:"";t(e,`${o}${n}`)},[e,o,t]),prependFileToTitle:(0,a.useCallback)((i,a,n)=>{let s=i?`${a?`${r.g6} `:""}${i}${n?" ":" - "}`:"";t(e,`${s}${o}`)},[e,o,t])}}},74762:(e,t,i)=>{i.d(t,{A:()=>s});var a=i(14232),n=i(28229);let s=()=>{let{mountEmscriptenFs:e,unMapFs:t,updateFolder:i}=(0,n.f)(),s=(0,a.useRef)("");return(0,a.useEffect)(()=>()=>{if(s.current){let e=s.current;s.current="",t(e,!0).then(()=>i("/",void 0,e)).catch(()=>{})}},[t,i]),(0,a.useCallback)(async(t,a)=>{if(!t)return;let n="";try{n=await e(t,a)}catch{}n&&(i("/",n),s.current=n)},[e,i])}},75970:(e,t,i)=>{i.d(t,{p:()=>o});var a=i(79052),n=i(14232),s=i(28229),r=i(65266);let o=()=>{let{createPath:e,updateFolder:t}=(0,s.f)();return{createSnapshot:(0,n.useCallback)(async(i,n,s,o=!0,l=r.Sb)=>{let d="";try{if((d=await e(i,l,n,void 0,o))&&s)try{let t="function"==typeof s?await s():s;t&&await e(`${(0,a.join)(l,d)}${r.V9}`,r.jv,t,void 0,o)}catch{}t((0,a.dirname)(l)),t(l,d)}catch{}return d},[e,t])}}}}]);