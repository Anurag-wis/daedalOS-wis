"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3590],{16119:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(77232);let s=(e,t)=>(0,r.AH)(["&::before{color:",';content:"','";display:flex;font-size:16px;font-weight:600;height:100%;left:0;place-content:center;place-items:center;position:absolute;top:0;width:100%;}'],t,e)},58196:(e,t,n)=>{n.d(t,{A:()=>p});var r=n(79052),s=n(14232),a=n(58688),i=n(59029),l=n(35575),o=n(28229),c=n(48940),u=n(92336),h=n(65266),d=n(4622),f=n(65287);let p=({callback:e,directory:t=h.Bn,id:n,onDragLeave:p,onDragOver:m,updatePositions:v})=>{let{url:g}=(0,c.N)(),w=(0,f.w)(),{iconPositions:b,sortOrders:x,setIconPositions:T}=(0,u.w)(),{exists:j,mkdirRecursive:A,updateFolder:k,writeFile:y}=(0,o.f)(),E=(0,s.useCallback)(async(e,t,s)=>{if(n)if(t){let a=(0,r.join)(h.Bn,e);if(await A(h.Bn),await y(a,t,!0))return s===l.z.UPDATE_URL&&g(n,a),k(h.Bn,e),(0,r.basename)(a)}else s===l.z.UPDATE_URL&&g(n,e);return""},[n,A,k,g,y]),{openTransferDialog:C}=(0,a.A)();return{onDragLeave:p,onDragOver:(0,s.useCallback)(e=>{m?.(e),(0,d.CH)(e)},[m]),onDrop:(0,s.useCallback)(s=>{if(h.jj.has((0,d.uQ)(t)))return;if(s.target instanceof HTMLElement){if(s.target.closest(".focus-within")?.contains(s.target))return;if(v){let{files:e,text:n}=(0,i.bn)(s);if(0===e.length&&""===n)return;(async()=>{let a={x:s.clientX,y:s.clientY},i=[];if(n){try{i=JSON.parse(n)}catch{}if(!Array.isArray(i))return;let[e]=i;if(!e||e.startsWith(t)&&(0,r.basename)(e)===(0,r.relative)(t,e))return;i=i.map(e=>(0,r.basename)(e))}else i=e instanceof FileList?[...e].map(e=>e.name):[...e].map(e=>e.getAsFile()?.name||"").filter(Boolean);i=await (0,d.$I)(i,t,b,j),(0,d.$Y)(t,s.target,b,x,a,i,T,j)})()}}let a="string"==typeof n;a&&!v&&t===h.Bn&&w.current[n]?.componentWindow?.focus(h.VD),(0,i.nX)(s,e||E,t,C,a)},[e,t,j,b,n,C,w,T,x,v,E])}}},68380:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(14232),s=n(65266);let a=(e,t=!1)=>{let n=(0,r.useRef)(0),a=(0,r.useRef)(0);return{onClick:(0,r.useCallback)(r=>{let i=()=>{r.stopPropagation(),e(r)},l=()=>{n.current&&(clearTimeout(n.current),n.current=0)},o=()=>{a.current>=12&&l(),0===n.current?(r.target.removeEventListener("pointermove",o),a.current=0):a.current+=1};t?i():0===n.current?(n.current=window.setTimeout(l,s.UW.DOUBLE_CLICK),r.target.addEventListener("pointermove",o,{passive:!0})):(l(),i())},[e,t])}}},73100:(e,t,n)=>{n.d(t,{A:()=>l});var r=n(14232),s=n(48940),a=n(31157),i=n(65266);let l=e=>{let{title:t}=(0,s.N)(),[n]=(0,r.useMemo)(()=>e.split(i.QB),[e]),{title:l}=a.A[n]||{};return{appendFileToTitle:(0,r.useCallback)((n,r)=>{let s=n?` - ${n}${r?` ${i.g6}`:""}`:"";t(e,`${l}${s}`)},[e,l,t]),prependFileToTitle:(0,r.useCallback)((n,r,s)=>{let a=n?`${r?`${i.g6} `:""}${n}${s?" ":" - "}`:"";t(e,`${a}${l}`)},[e,l,t])}}},73590:(e,t,n)=>{n.r(t),n.d(t,{default:()=>z});var r=n(37876),s=n(79052),a=n(14232);let i=(0,a.memo)(()=>(0,r.jsx)("svg",{viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M30 2v10h-2V5.422L5.422 28H12v2H2V20h2v6.578L26.578 4H20V2h10z"})})),l=(0,a.memo)(()=>(0,r.jsx)("svg",{viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M4 18h10v10h-2v-6.578L1.453 31.953.047 30.547 10.578 20H4v-2zm17.422-6H28v2H18V4h2v6.578L30.547.047l1.406 1.406z"})})),o=(0,a.memo)(()=>(0,r.jsx)("svg",{viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M31.703 30.297Q32 30.594 32 31t-.297.703T31 32t-.703-.297l-12.266-12.25q-1.5 1.234-3.289 1.891T11 22q-1.516 0-2.922-.391T5.453 20.5t-2.227-1.727-1.727-2.227T.39 13.921t-.391-2.922.391-2.922 1.109-2.625 1.727-2.227 2.227-1.727T8.078.389 11-.002t2.922.391 2.625 1.109 2.227 1.727 1.727 2.227 1.109 2.625.391 2.922q0 1.953-.656 3.742t-1.891 3.289zM11 20q1.859 0 3.5-.711t2.859-1.93 1.93-2.859T20 11t-.711-3.5-1.93-2.859-2.859-1.93T11 2t-3.5.711-2.859 1.93T2.711 7.5 2 11t.711 3.5 1.93 2.859 2.859 1.93T11 20zm1-10h4v2h-4v4h-2v-4H6v-2h4V6h2v4z"})})),c=(0,a.memo)(()=>(0,r.jsx)("svg",{viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M32 30.906q0 .438-.266.766T31 32q-.406 0-.703-.297l-12.266-12.25q-1.5 1.234-3.289 1.891T11 22q-1.516 0-2.922-.391T5.453 20.5t-2.227-1.727-1.727-2.227T.39 13.921t-.391-2.922.391-2.922 1.109-2.625 1.727-2.227 2.227-1.727T8.078.389 11-.002t2.922.391 2.625 1.109 2.227 1.727 1.727 2.227 1.109 2.625.391 2.922q0 1.953-.656 3.742t-1.891 3.289q.234.234.898.891t1.594 1.563 2.031 1.992 2.219 2.203 2.164 2.18 1.859 1.922 1.297 1.43.484.695zM11 20q1.859 0 3.5-.711t2.859-1.93 1.93-2.859T20 11t-.711-3.5-1.93-2.859-2.859-1.93T11 2t-3.5.711-2.859 1.93T2.711 7.5 2 11t.711 3.5 1.93 2.859 2.859 1.93T11 20zM6 10h10v2H6v-2z"})}));var u=n(77232),h=n(16119);let d="48px",f="32px",p=u.Ay.div.withConfig({componentId:"sc-26662b3f-0"})(["background-color:#222;display:flex;height:100%;padding-bottom:",";padding-top:",";position:relative;svg{fill:#fff;}figure{display:flex;height:100%;margin:0 "," ",";overflow:hidden;place-content:center;place-items:center;width:100%;div{color:rgb(167 167 167);font-size:13px;padding:0 38px;text-align:center;}img{display:",";max-height:100%;max-width:100%;}}nav{display:flex;height:",";place-content:center;place-items:center;position:absolute;&.top{top:0;width:100%;svg{height:16px;}}&.bottom{bottom:0;right:0;svg{height:20px;margin-top:2px;}}button{height:",";width:",";&:disabled{pointer-events:none;svg{fill:rgb(125 125 125);}}&:hover{background-color:rgb(75 75 75 / 50%);}&:active{background-color:rgb(100 100 100 / 50%);}}}&.drop{",";}"],f,d,f,f,({$showImage:e})=>e?"block":"none",d,d,d,(0,h.A)("Drop photo file here","#fff"));var m=n(54845),v=n(78911),g=n(48940),w=n(73100);let b={cursor:"default",maxScale:7,minScale:1,panOnlyWhenZoomed:!0,step:.1};var x=n(58196),T=n(28229),j=n(96668),A=n(68380),k=n(2636),y=n(65266),E=n(4622);let{maxScale:C,minScale:L}=b,z=(0,a.memo)(({id:e})=>{let{processes:{[e]:t}={},url:u}=(0,g.N)(),{componentWindow:h,closing:d=!1,url:f=""}=t||{},[z,$]=(0,a.useState)({}),[H,M]=(0,a.useState)(!1),{prependFileToTitle:B}=(0,w.A)(e),{readFile:q,readdir:N}=(0,T.f)(),R=(0,a.useRef)(null),O=(0,a.useRef)(null),S=(0,a.useRef)(null),{reset:D,scale:P,zoomIn:_,zoomOut:U,zoomToPoint:V}=((e,t,n)=>{let[r,i]=(0,a.useState)(),{getScale:l,reset:o,zoomIn:c,zoomOut:u,zoomToPoint:h,zoomWithWheel:d}=r||{},{processes:{[e]:f}}=(0,g.N)(),{closing:p,componentWindow:x,url:T=""}=f||{},{prependFileToTitle:j}=(0,w.A)(e),A=(0,a.useCallback)(e=>{let{detail:{scale:t=0,x:n=0,y:a=0}={}}=e||{};if(T&&t){let{minScale:e,step:i}=b,l=t<e+i;l&&(n||a)&&window.setTimeout(()=>r?.reset(),50),p||j(l?(0,s.basename)(T):`${(0,s.basename)(T)} (${Math.floor(100*t)}%)`)}},[p,r,j,T]),k=(0,a.useCallback)(e=>d?.(e,{step:.3}),[d]);return(0,v.A)(x,o),(0,a.useEffect)(()=>(t&&n&&(t.addEventListener("panzoomchange",A),n.addEventListener("wheel",k)),()=>{t?.removeEventListener("panzoomchange",A),n?.removeEventListener("wheel",k)}),[n,t,A,k]),(0,a.useEffect)(()=>(t&&!r&&i((0,m.A)(t,b)),()=>r?.destroy()),[t,r]),{reset:o,scale:l?.(),zoomIn:c,zoomOut:u,zoomToPoint:h}})(e,O.current,S.current),{fullscreenElement:F,toggleFullscreen:Q}=(0,j.T)(),I=(0,a.useCallback)(async()=>{let e=await q(f),t=(0,E.uQ)(f);if(!y.T8.has(t)){let{decodeImageToBuffer:r}=await n.e(4541,"high").then(n.bind(n,74541)),s=await r(t,e);s&&(e=s)}$(t=>{let[n]=Object.keys(t);if(n){if(n===f)return t;D?.()}return{[f]:(0,E.Zd)(e,(0,E.hH)(f))}}),B((0,s.basename)(f))},[B,q,D,f]),W=(0,a.useCallback)(async({key:t})=>{switch(t){case"ArrowRight":case"ArrowLeft":{let n=await N((0,s.dirname)(f)),r=n.indexOf((0,s.basename)(f)),a=(t,r)=>{if(-1===t)return;let i=t+(r?1:-1);if(-1===i||i===n.length)return;let l=n[i];y.O4.has((0,E.uQ)(l))?u(e,(0,s.join)((0,s.dirname)(f),l)):a(i,r)};a(r,"ArrowRight"===t)}}},[e,N,u,f]);return(0,a.useEffect)(()=>{!f||z[f]||d||I()},[d,I,z,f]),(0,a.useEffect)(()=>(h?.addEventListener("keydown",W),()=>h?.removeEventListener("keydown",W)),[h,W]),(0,r.jsxs)(p,{ref:R,$showImage:!!(z[f]&&!H),className:f?"":"drop",onContextMenu:E.CH,...(0,x.A)({id:e}),children:[(0,r.jsxs)("nav",{className:"top",children:[(0,r.jsx)(k.A,{disabled:!f||P===C||H,onClick:_,...(0,E.Pf)("Zoom in"),children:(0,r.jsx)(o,{})}),(0,r.jsx)(k.A,{disabled:!f||P===L||H,onClick:U,...(0,E.Pf)("Zoom out"),children:(0,r.jsx)(c,{})})]}),(0,r.jsxs)("figure",{ref:S,...(0,A.A)(e=>{P===L?V?.(2*L,e,{animate:!0}):D?.()}),children:[(0,r.jsx)("img",{ref:O,alt:(0,s.basename)(f,(0,s.extname)(f)),decoding:"async",onError:()=>M(!0),onLoad:()=>M(!1),src:z[f],...y.rJ}),H&&(0,r.jsxs)("div",{children:[(0,s.basename)(f),(0,r.jsx)("br",{}),"Sorry, Photos can't open this file because the format is currently unsupported, or the file is corrupted"]})]}),(0,r.jsx)("nav",{className:"bottom",children:(0,r.jsx)(k.A,{disabled:!f,onClick:()=>Q(R.current,"show"),...(0,E.Pf)("Full-screen"),children:F===R.current?(0,r.jsx)(l,{}):(0,r.jsx)(i,{})})})]})})},78911:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(14232);let s=(e,t)=>{let[n,s]=(0,r.useState)();(0,r.useEffect)(()=>{t&&s(new ResizeObserver(t))},[t]),(0,r.useEffect)(()=>(e instanceof HTMLElement&&n?.observe(e),()=>{e instanceof HTMLElement&&n?.unobserve(e)}),[e,n])}}}]);