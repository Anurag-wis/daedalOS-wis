"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5136],{28124:(e,t,a)=>{a.d(t,{A:()=>n});let n=a(77232).Ay.div.withConfig({componentId:"sc-83f4cbe3-0"})(['cursor:wait;height:100%;width:100%;&::before{color:#fff;content:"Working on it...";display:flex;font-size:12px;font-weight:200;justify-content:center;letter-spacing:0.3px;mix-blend-mode:difference;padding-top:',"px;}"],({$hasColumns:e,theme:t})=>e?t.sizes.window.textTopPadding+t.sizes.fileManager.columnHeight:t.sizes.window.textTopPadding)},35136:(e,t,a)=>{a.r(t),a.d(t,{default:()=>m});var n=a(37876),i=a(79052),s=a(14232);let o=a(77232).Ay.div.withConfig({componentId:"sc-1924a15a-0"})(["iframe{opacity:",";transition:opacity 0.25s ease-in;}.loading{&::before{color:#fff;font-weight:500;mix-blend-mode:normal;text-shadow:1px 2px 3px rgb(0 0 0 / 50%);}}"],({$loaded:e})=>e?"100%":"0%");var l=a(28124),r=a(58196),c=a(73100),d=a(28229),f=a(48940),p=a(92336),u=a(65266),w=a(4622);let m=(0,s.memo)(({id:e})=>{let{closeWithTransition:t,processes:{[e]:{libs:[a=""]=[],url:m=""}={}}={}}=(0,f.N)(),{createPath:g,exists:h,readFile:b,updateFolder:y,writeFile:k}=(0,d.f)(),{foregroundId:x,setForegroundId:$,setWallpaper:A}=(0,p.w)(),v=(0,s.useRef)(null),[C,E]=(0,s.useState)(!1),[_,j]=(0,s.useState)(),{prependFileToTitle:B}=(0,c.A)(e),T=(0,s.useCallback)(e=>t=>{let a=(0,i.join)(u.rO,"wallpaper.png");t.toBlob(async t=>{await k(a,await (0,w.Z6)(t),!0),A(a,e)})},[A,k]),{onDragOver:H,onDrop:D}=(0,r.A)({id:e});return(0,s.useEffect)(()=>{B("Untitled")},[B]),(0,s.useEffect)(()=>{x!==e&&v.current?.contentWindow?.addEventListener("click",()=>$(e),u.w3)},[x,e,$]),(0,s.useEffect)(()=>{let{contentWindow:a}=v.current||{};if(C&&a&&!_){let n=a.systemHooks.showOpenFileDialog,s=a.file_new;j(a),a.file_new=()=>{B("Untitled"),s()},a.systemHooks.setWallpaperTiled=T("tile"),a.systemHooks.setWallpaperCentered=T("center"),a.systemHooks.showOpenFileDialog=async e=>{let{file:t}=await n(e);return B(t.name),{file:t}},a.close=()=>t(e),a.storage_quota_exceeded=()=>{},a.systemHooks.showSaveFileDialog=async({defaultFileName:e,getBlob:t})=>y(u.Bn,await g(`${e}.png`,u.Bn,await (0,w.Z6)(await t("image/png")))),a.systemHooks.writeBlobToHandle=async(e,t)=>{await h(e)&&(await k(e,await (0,w.Z6)(t),!0),y((0,i.dirname)(e),(0,i.basename)(e)))},a.addEventListener("dragover",H),a.addEventListener("drop",D)}},[t,g,h,e,_,C,H,D,B,T,y,k]),(0,s.useEffect)(()=>{_&&m&&b(m).then(e=>{let t=_.onunhandledrejection;_.onunhandledrejection=e=>{t?.(e),e?.reason?.message==="either options.data or options.file or options.filePath must be passed"&&B("Untitled")},_.open_from_file(new File([e],m),m),B((0,i.basename)(m))})},[_,B,b,m]),(0,n.jsxs)(o,{$loaded:C,children:[!C&&(0,n.jsx)(l.A,{className:"loading"}),(0,n.jsx)("iframe",{ref:v,height:"100%",id:`jspaint-${e}`,onLoad:()=>E(!0),src:a,title:e,width:"100%",...u.aI})]})})},58196:(e,t,a)=>{a.d(t,{A:()=>w});var n=a(79052),i=a(14232),s=a(58688),o=a(59029),l=a(35575),r=a(28229),c=a(48940),d=a(92336),f=a(65266),p=a(4622),u=a(65287);let w=({callback:e,directory:t=f.Bn,id:a,onDragLeave:w,onDragOver:m,updatePositions:g})=>{let{url:h}=(0,c.N)(),b=(0,u.w)(),{iconPositions:y,sortOrders:k,setIconPositions:x}=(0,d.w)(),{exists:$,mkdirRecursive:A,updateFolder:v,writeFile:C}=(0,r.f)(),E=(0,i.useCallback)(async(e,t,i)=>{if(a)if(t){let s=(0,n.join)(f.Bn,e);if(await A(f.Bn),await C(s,t,!0))return i===l.z.UPDATE_URL&&h(a,s),v(f.Bn,e),(0,n.basename)(s)}else i===l.z.UPDATE_URL&&h(a,e);return""},[a,A,v,h,C]),{openTransferDialog:_}=(0,s.A)();return{onDragLeave:w,onDragOver:(0,i.useCallback)(e=>{m?.(e),(0,p.CH)(e)},[m]),onDrop:(0,i.useCallback)(i=>{if(f.jj.has((0,p.uQ)(t)))return;if(i.target instanceof HTMLElement){if(i.target.closest(".focus-within")?.contains(i.target))return;if(g){let{files:e,text:a}=(0,o.bn)(i);if(0===e.length&&""===a)return;(async()=>{let s={x:i.clientX,y:i.clientY},o=[];if(a){try{o=JSON.parse(a)}catch{}if(!Array.isArray(o))return;let[e]=o;if(!e||e.startsWith(t)&&(0,n.basename)(e)===(0,n.relative)(t,e))return;o=o.map(e=>(0,n.basename)(e))}else o=e instanceof FileList?[...e].map(e=>e.name):[...e].map(e=>e.getAsFile()?.name||"").filter(Boolean);o=await (0,p.$I)(o,t,y,$),(0,p.$Y)(t,i.target,y,k,s,o,x,$)})()}}let s="string"==typeof a;s&&!g&&t===f.Bn&&b.current[a]?.componentWindow?.focus(f.VD),(0,o.nX)(i,e||E,t,_,s)},[e,t,$,y,a,_,b,x,k,g,E])}}},73100:(e,t,a)=>{a.d(t,{A:()=>l});var n=a(14232),i=a(48940),s=a(31157),o=a(65266);let l=e=>{let{title:t}=(0,i.N)(),[a]=(0,n.useMemo)(()=>e.split(o.QB),[e]),{title:l}=s.A[a]||{};return{appendFileToTitle:(0,n.useCallback)((a,n)=>{let i=a?` - ${a}${n?` ${o.g6}`:""}`:"";t(e,`${l}${i}`)},[e,l,t]),prependFileToTitle:(0,n.useCallback)((a,n,i)=>{let s=a?`${n?`${o.g6} `:""}${a}${i?" ":" - "}`:"";t(e,`${s}${l}`)},[e,l,t])}}}}]);