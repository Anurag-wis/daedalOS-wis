"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5401],{3615:(e,t,i)=>{i.d(t,{A:()=>l});var a=i(77232),r=i(14232),n=i(5696),s=i(48940),o=i(92336);let l=e=>{let{setWindowStates:t}=(0,o.w)(),{processes:{[e]:{lockAspectRatio:i=!1,maximized:l=!1}={}}={}}=(0,s.N)(),{sizes:{titleBar:c}}=(0,a.DP)();return{updateWindowSize:(0,r.useCallback)((a,r)=>t(t=>({...t,[e]:{...t?.[e],maximized:l,size:(0,n.WZ)({height:a+c.height,width:r},i)}})),[e,i,l,t,c.height])}}},5401:(e,t,i)=>{i.r(t),i.d(t,{default:()=>C});var a=i(37876),r=i(14232);let n=i(77232).Ay.div.withConfig({componentId:"sc-b4d6fec7-0"})(['canvas{background-color:#000;}div{font-family:"Liberation Mono","DejaVu Sans Mono","Courier New",monospace;font-size:14px;font-weight:700;line-height:normal;position:relative;white-space:pre;}']);var s=i(79052);let o={autostart:!0,bios:{url:"/Program Files/Virtual x86/bios/seabios.bin"},log_level:0,network_relay_url:"wss://relay.widgetry.org/",vga_bios:{url:"/Program Files/Virtual x86/bios/vgabios.bin"},wasm_path:"/Program Files/Virtual x86/v86.wasm"},l=".bin.save",c=new Set([160,180,200,320,360,400,720,1200,1440,1722,2880]);var u=i(3615),h=i(4622);let d="screen-set-size-graphical",p="screen-set-size-text";var f=i(73100),g=i(28229),m=i(90143),w=i(48940),b=i(92336),y=i(65266),x=i(75970),v=i(82909).Buffer;window.DEBUG=!1;let k=({containerRef:e,id:t,loading:i,setLoading:a,url:n})=>{let{processes:{[t]:k}}=(0,w.N)(),{foregroundId:_}=(0,b.w)(),{closing:C,libs:z=[]}=k||{},{appendFileToTitle:$}=(0,f.A)(t),A=(0,r.useRef)(!1),[B,M]=(0,r.useState)({}),{exists:T,readFile:E}=(0,g.f)(),S=(0,r.useCallback)(e=>new Promise((t,i)=>{B[e]?.save_state().then(t).catch(i)}),[B]),{createSnapshot:j}=(0,x.p)(),L=(0,r.useCallback)(async(e,t)=>{await j(`${(0,s.basename)(e)}${l}`,v.from(await S(e)),t);try{B[e]?.destroy()}catch{}},[j,B,S]),R=(0,r.useCallback)(async t=>{let i;if(B[t]?.v86.cpu.devices.vga.graphical_mode)i=e.current?.querySelector("canvas")?.toDataURL("image/png");else if(e.current instanceof HTMLElement){let t=await (0,h.em)();try{i=await t?.toPng(e.current,{skipAutoScale:!0})}catch{}}return i?v.from(i.replace("data:image/png;base64,",""),"base64"):void 0},[e,B]),H=(0,r.useCallback)(async()=>{var t;let[i]=Object.keys(B);"string"==typeof i&&(await L(i,await R(i)),M({[n]:void 0}));let a=n?await E(n):v.from(""),r=(0,h.uQ)(n),u=".iso"===r,d=(0,h.Zd)(a),p={[u?"cdrom":(t=a.length,".bin"===r?"bzimage":(e=>c.has(e>>10)&&(1023&e)==0||512===e)(t)?"fda":"hda")]:{async:!1,size:a.length,url:d,use_parts:!1}},{deviceMemory:f=.25}=navigator,g={boot_order:u?531:561,memory_size:128*f*1048576,screen_container:e.current,vga_memory_size:8*f*1048576,...p,...o},w=(0,s.join)(y.Sb,`${(0,s.basename)(n)}${l}`),b=await T(w)?(0,h.Zd)(await E(w)):void 0;b&&(g.initial_state={url:b}),g.filesystem={basefs:URL.createObjectURL(new Blob([JSON.stringify((0,m.hf)())],{type:"application/json"})),baseurl:window.location?.origin??"/"};let x=new window.V86Starter(g);x.add_listener("emulator-loaded",()=>{if(A.current)return void x.destroy();$((0,s.basename)(n)),(0,h.E)(d),g.initial_state&&(0,h.E)(g.initial_state.url),g.filesystem&&(0,h.E)(g.filesystem.basefs),e.current?.addEventListener("click",x.lock_mouse),M({[n]:x})})},[$,L,e,B,T,E,R,n]);((e,t,i)=>{let{updateWindowSize:a}=(0,u.A)(e);(0,r.useEffect)(()=>{let e=([e,i])=>{let r=t.current?.querySelector("canvas");r?.style.height&&r?.style.width?a((0,h.kl)(r?.style.height),(0,h.kl)(r?.style.width)):a(i,e)},r=([,e])=>{let{height:i,width:r}=t.current?.querySelector("span:last-of-type")?.getBoundingClientRect()||{};i&&r&&a(e*i,r)};return i?.add_listener(d,e),i?.add_listener(p,r),()=>{i?.remove_listener(d,e),i?.remove_listener(p,r)}},[i,t,a])})(t,e,B[n]),(0,r.useEffect)(()=>{i&&(0,h.aY)(z).then(()=>{window.V86Starter&&a(!1)})},[z,i,a]),(0,r.useEffect)(()=>{let e=_===t;Object.values(B).forEach(t=>t?.keyboard_set_status(e))},[B,_,t]),(0,r.useEffect)(()=>(!k||C||i||n in B||H(),()=>{if(C&&!A.current)if(A.current=!0,n&&B[n]){let e=e=>{window.setTimeout(()=>L(n,e),y.UW.WINDOW)};R(n).then(e).catch(e)}else B[n]?.destroy()}),[L,C,B,H,i,k,R,n])};var _=i(47825);let C=(0,r.memo)(({id:e})=>(0,a.jsxs)(_.A,{StyledComponent:n,id:e,useHook:k,children:[(0,a.jsx)("div",{onContextMenuCapture:h.CH}),(0,a.jsx)("canvas",{onContextMenuCapture:h.CH})]}))},5696:(e,t,i)=>{i.d(t,{Gn:()=>s,Ve:()=>c,WZ:()=>u,Xc:()=>l,r_:()=>o});var a=i(68660),r=i(65266),n=i(4622);let s=(e,t,i=[],a=0)=>{let[s]=e.split(r.QB),o=`${s}${r.QB}`,l=i.find(e=>e.startsWith(o))||"",{componentWindow:c}=t?.[l]||{},{x:u=0,y:h=0,width:d=0,height:p=0}=c?.getBoundingClientRect()||{};return!(u+a+d>(0,n.e8)()||h+a+p>(0,n.Bv)())&&(u||h)?{x:u+a,y:h+a}:void 0},o=({height:e,width:t})=>{let[i,a]=[(0,n.Bv)(),(0,n.e8)()];return{x:Math.floor(a/2-(0,n.kl)(t)/2),y:Math.floor((i-r.D5)/2-(0,n.kl)(e)/2)}},l={BOTTOM:15,LEFT:150,RIGHT:50,TOP:15},c=(e,t,i=!1)=>{let{position:a,size:r}=e||{},{x:s=0,y:o=0}=a||{},{height:c=0,width:u=0}=r||{};return i?s+l.RIGHT>t.x||s+(0,n.kl)(u)-l.LEFT<0||o+l.BOTTOM>t.y||o+l.TOP<0:s<0||o<0||s+(0,n.kl)(u)>t.x||o+(0,n.kl)(c)>t.y},u=(e,t)=>{let i=Number(e.height),s=Number(e.width),[o,l]=[(0,n.Bv)(),(0,n.e8)()],c=o-r.D5,u=Math.max(a.WB,Math.min(i,c)),h=Math.max(a.lH,Math.min(s,l));if(!t)return{height:u,width:h};let d=i===u,p=s===h;return d||p?d?p?{height:u,width:h}:{height:Math.round(u/(s/h)),width:h}:{height:u,width:Math.round(h/(i/u))}:i>s?{height:u,width:Math.round(h/(c/u))}:{height:Math.round(u/(l/h)),width:h}}},28124:(e,t,i)=>{i.d(t,{A:()=>a});let a=i(77232).Ay.div.withConfig({componentId:"sc-83f4cbe3-0"})(['cursor:wait;height:100%;width:100%;&::before{color:#fff;content:"Working on it...";display:flex;font-size:12px;font-weight:200;justify-content:center;letter-spacing:0.3px;mix-blend-mode:difference;padding-top:',"px;}"],({$hasColumns:e,theme:t})=>e?t.sizes.window.textTopPadding+t.sizes.fileManager.columnHeight:t.sizes.window.textTopPadding)},47825:(e,t,i)=>{i.d(t,{A:()=>u});var a=i(37876),r=i(14232),n=i(77232),s=i(28124),o=i(58196),l=i(48940);let c=n.Ay.div.withConfig({componentId:"sc-e37924df-0"})([""]),u=(0,r.memo)(({id:e,useHook:t,StyledComponent:i,children:n})=>{let{processes:{[e]:{url:u=""}={}}}=(0,l.N)(),h=(0,r.useRef)(null),[d,p]=(0,r.useState)(!0),f=(0,r.useMemo)(()=>({contain:"strict",visibility:d?"hidden":"visible"}),[d]);return t({containerRef:h,id:e,loading:d,setLoading:p,url:u}),(0,a.jsxs)(a.Fragment,{children:[d&&(0,a.jsx)(s.A,{}),(0,a.jsx)(i||c,{ref:h,style:f,...(0,o.A)({id:e}),children:n})]})})},58196:(e,t,i)=>{i.d(t,{A:()=>f});var a=i(79052),r=i(14232),n=i(58688),s=i(59029),o=i(35575),l=i(28229),c=i(48940),u=i(92336),h=i(65266),d=i(4622),p=i(65287);let f=({callback:e,directory:t=h.Bn,id:i,onDragLeave:f,onDragOver:g,updatePositions:m})=>{let{url:w}=(0,c.N)(),b=(0,p.w)(),{iconPositions:y,sortOrders:x,setIconPositions:v}=(0,u.w)(),{exists:k,mkdirRecursive:_,updateFolder:C,writeFile:z}=(0,l.f)(),$=(0,r.useCallback)(async(e,t,r)=>{if(i)if(t){let n=(0,a.join)(h.Bn,e);if(await _(h.Bn),await z(n,t,!0))return r===o.z.UPDATE_URL&&w(i,n),C(h.Bn,e),(0,a.basename)(n)}else r===o.z.UPDATE_URL&&w(i,e);return""},[i,_,C,w,z]),{openTransferDialog:A}=(0,n.A)();return{onDragLeave:f,onDragOver:(0,r.useCallback)(e=>{g?.(e),(0,d.CH)(e)},[g]),onDrop:(0,r.useCallback)(r=>{if(h.jj.has((0,d.uQ)(t)))return;if(r.target instanceof HTMLElement){if(r.target.closest(".focus-within")?.contains(r.target))return;if(m){let{files:e,text:i}=(0,s.bn)(r);if(0===e.length&&""===i)return;(async()=>{let n={x:r.clientX,y:r.clientY},s=[];if(i){try{s=JSON.parse(i)}catch{}if(!Array.isArray(s))return;let[e]=s;if(!e||e.startsWith(t)&&(0,a.basename)(e)===(0,a.relative)(t,e))return;s=s.map(e=>(0,a.basename)(e))}else s=e instanceof FileList?[...e].map(e=>e.name):[...e].map(e=>e.getAsFile()?.name||"").filter(Boolean);s=await (0,d.$I)(s,t,y,k),(0,d.$Y)(t,r.target,y,x,n,s,v,k)})()}}let n="string"==typeof i;n&&!m&&t===h.Bn&&b.current[i]?.componentWindow?.focus(h.VD),(0,s.nX)(r,e||$,t,A,n)},[e,t,k,y,i,A,b,v,x,m,$])}}},68660:(e,t,i)=>{i.d(t,{Ay:()=>o,EX:()=>r,Ho:()=>a,WB:()=>n,lH:()=>s});let a={bottom:!1,bottomLeft:!1,bottomRight:!1,left:!1,right:!1,top:!1,topLeft:!1,topRight:!1},r={bottom:!0,bottomLeft:!0,bottomRight:!0,left:!0,right:!0,top:!0,topLeft:!0,topRight:!0},n=30,s=166,o={cancel:".cancel",dragHandleClassName:"handle",enableUserSelectHack:!1,minHeight:`${n}px`,minWidth:`${s}px`,resizeHandleStyles:{bottom:{bottom:"-3px",cursor:"ns-resize",height:"6px"},bottomLeft:{bottom:"-3px",cursor:"nesw-resize",height:"12px",left:"-3px",width:"12px"},bottomRight:{bottom:"-3px",cursor:"nwse-resize",height:"12px",right:"-3px",width:"12px"},left:{cursor:"ew-resize",left:"-3px",width:"6px"},right:{cursor:"ew-resize",right:"-3px",width:"6px"},top:{cursor:"ns-resize",height:"6px",top:"-3px"},topLeft:{cursor:"nwse-resize",height:"12px",left:"-3px",top:"-3px",width:"12px"},topRight:{cursor:"nesw-resize",height:"12px",right:"-3px",top:"-3px",width:"12px"}}}},73100:(e,t,i)=>{i.d(t,{A:()=>o});var a=i(14232),r=i(48940),n=i(31157),s=i(65266);let o=e=>{let{title:t}=(0,r.N)(),[i]=(0,a.useMemo)(()=>e.split(s.QB),[e]),{title:o}=n.A[i]||{};return{appendFileToTitle:(0,a.useCallback)((i,a)=>{let r=i?` - ${i}${a?` ${s.g6}`:""}`:"";t(e,`${o}${r}`)},[e,o,t]),prependFileToTitle:(0,a.useCallback)((i,a,r)=>{let n=i?`${a?`${s.g6} `:""}${i}${r?" ":" - "}`:"";t(e,`${n}${o}`)},[e,o,t])}}},75970:(e,t,i)=>{i.d(t,{p:()=>o});var a=i(79052),r=i(14232),n=i(28229),s=i(65266);let o=()=>{let{createPath:e,updateFolder:t}=(0,n.f)();return{createSnapshot:(0,r.useCallback)(async(i,r,n,o=!0,l=s.Sb)=>{let c="";try{if((c=await e(i,l,r,void 0,o))&&n)try{let t="function"==typeof n?await n():n;t&&await e(`${(0,a.join)(l,c)}${s.V9}`,s.jv,t,void 0,o)}catch{}t((0,a.dirname)(l)),t(l,c)}catch{}return c},[e,t])}}}}]);