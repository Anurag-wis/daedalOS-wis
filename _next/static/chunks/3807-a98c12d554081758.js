"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3807],{1565:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(14232),i=n(48940),a=n(92336);let o=e=>{let{stackOrder:t=[]}=(0,a.w)(),{processes:n}=(0,i.N)();return(0,r.useMemo)(()=>t.find(t=>t!==e&&!n?.[t]?.minimized),[e,n,t])||""}},9394:(e,t,n)=>{n.d(t,{BN:()=>a,Gm:()=>c,JN:()=>u,Ki:()=>l,Me:()=>o,Q2:()=>d,_3:()=>s,r5:()=>i});var r=n(65266);let i="Start",a="Type here to search",o=()=>n.e(3289,"high").then(n.bind(n,93289)),l=()=>n.e(4409,"high").then(n.bind(n,54409)),s=()=>n.e(3531,"high").then(n.bind(n,23531)),c=()=>n.e(3234,"high").then(n.bind(n,43234)),u=()=>n.e(3899,"high").then(n.bind(n,93899)),d=({relatedTarget:e},t,n,i,a,o=!1)=>{if(!(e&&t?.contains(e))){let l=t?.nextSibling,s=e===l,c=e?.parentElement===l,u=e?.title===a;e&&(o&&s||!s&&(!c||!u))?n(!1):(i||t)?.focus(r.VD)}}},11835:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(77232),i=n(65194),a=n(65266);let o=r.Ay.ol.withConfig({componentId:"sc-af353f69-0"})(["",";contain:strict;display:grid;gap:",";grid-auto-flow:row;grid-template-columns:",";grid-template-rows:",";height:100%;overflow:",";padding:",";place-content:flex-start;pointer-events:",";main > &{grid-auto-flow:column;height:calc(100% - ","px);overflow:visible;padding-bottom:21px;}"],({$scrollable:e})=>e?(0,i.A)():void 0,({theme:e})=>`${e.sizes.fileManager.rowGap} ${e.sizes.fileManager.columnGap}`,({theme:e})=>`repeat(auto-fill, ${e.sizes.fileManager.gridEntryWidth})`,({theme:e})=>`repeat(auto-fill, ${e.sizes.fileManager.gridEntryHeight})`,({$isEmptyFolder:e,$scrollable:t})=>!e&&t?void 0:"hidden",({theme:e})=>e.sizes.fileManager.padding,({$selecting:e})=>e?"auto":void 0,a.D5)},19719:(e,t,n)=>{n.d(t,{A:()=>c});var r=n(14232),i=n(1565),a=n(48940),o=n(92336),l=n(65287),s=n(65266);let c=e=>{let t=(0,i.A)(e),{setForegroundId:n,removeFromStack:c}=(0,o.w)(),{closeWithTransition:u,maximize:d,minimize:f}=(0,a.N)(),m=(0,l.w)(),p=(0,r.useCallback)(r=>{f(e),r||n(t)},[e,f,t,n]),g=(0,r.useCallback)(()=>{let t=()=>{d(e),n(e),m.current[e]?.componentWindow?.focus(s.VD)},[r]=m.current[e]?.componentWindow?.getAnimations()||[];r?.finished?r.finished.then(t):t()},[e,d,m,n]);return{onClose:(0,r.useCallback)(()=>{c(e),u(e),n(t)},[u,e,t,c,n]),onMaximize:g,onMinimize:p}}},26489:(e,t,n)=>{n.d(t,{A:()=>r});let r=n(77232).Ay.li.withConfig({componentId:"sc-41c897d5-0"})(["display:flex;flex-direction:column;figure{display:flex;height:36px;padding-bottom:1px;padding-left:1px;place-items:center;figcaption{color:#fff;}picture{margin-left:3px;margin-right:8px;}svg{fill:rgb(210 210 210);height:8px;margin-left:auto;margin-right:8px;pointer-events:none;width:8px;}picture,svg{transition:margin 0.25s ease-out;}&:active{figcaption{letter-spacing:-0.15px;opacity:90%;}picture{margin-left:7px;}svg{margin-right:12px;}picture,svg{transition:none;}}@media (pointer:fine){&:hover{background-color:hsl(0 0% 35% / 70%);}}@media (pointer:coarse){&:active{background-color:hsl(0 0% 35% / 70%);border:1px solid hsl(0 0% 45% / 70%);}}}"])},28124:(e,t,n)=>{n.d(t,{A:()=>r});let r=n(77232).Ay.div.withConfig({componentId:"sc-83f4cbe3-0"})(['cursor:wait;height:100%;width:100%;&::before{color:#fff;content:"Working on it...";display:flex;font-size:12px;font-weight:200;justify-content:center;letter-spacing:0.3px;mix-blend-mode:difference;padding-top:',"px;}"],({$hasColumns:e,theme:t})=>e?t.sizes.window.textTopPadding+t.sizes.fileManager.columnHeight:t.sizes.window.textTopPadding)},39726:(e,t,n)=>{n.d(t,{A:()=>r});let r=n(77232).Ay.ol.withConfig({componentId:"sc-30ed03f7-0"})(["margin-top:7px;width:100%;picture:not(:first-of-type){position:absolute;}"])},41459:(e,t,n)=>{n.d(t,{H:()=>d,o:()=>u});var r=n(77232);let i=r.Ay.li.withConfig({componentId:"sc-aaf0d232-0"})(["margin-left:","px;width:fit-content;button{display:flex;padding-left:4px;text-align:left;figure{bottom:1px;display:flex;flex-direction:row;height:",";padding-right:","px;place-items:center;position:relative;figcaption{color:",";font-size:",";overflow:hidden;overflow-wrap:anywhere;padding-left:4px;text-overflow:ellipsis;white-space:nowrap;@supports not (overflow-wrap:anywhere){word-break:break-word;}}}}&:hover{background-color:",";}&.focus-within{background-color:",";&:hover{background-color:",";}}"],({theme:e})=>e.sizes.fileManager.detailsStartPadding,({theme:e})=>e.sizes.fileManager.detailsRowHeight,({theme:e})=>e.sizes.fileManager.detailsEndPadding,({theme:e})=>e.colors.fileEntry.text,({theme:e})=>e.sizes.fileEntry.fontSize,({theme:e})=>e.colors.fileEntry.background,({theme:e})=>e.colors.fileEntry.backgroundFocused,({theme:e,$selecting:t})=>t?e.colors.fileEntry.backgroundFocused:e.colors.fileEntry.backgroundFocusedHover);var a=n(43074);let o=r.Ay.li.withConfig({componentId:"sc-349404a4-0"})(["display:",";height:min-content;margin-bottom:",";outline-offset:-2px;padding:",";button{position:relative;figure{display:flex;flex-direction:column;margin-bottom:-2px;place-items:center;figcaption{color:",";font-size:",";line-height:1.2;margin:1px 0;overflow-wrap:anywhere;padding:2px 0;text-shadow:",";@supports not (overflow-wrap:anywhere){word-break:break-word;}}textarea{position:absolute;top:",";}picture{height:",";width:",";&:not(:first-of-type){position:absolute;img{position:absolute;}}}}}&:hover{background-color:",";outline:",";}&.focus-within{background-color:",";outline:",";z-index:1;&:hover{background-color:",";outline:",";}}"],({$visible:e})=>e?"flex":"none",({$labelHeightOffset:e})=>e?`-${e}px`:void 0,({theme:e})=>e.sizes.fileEntry.iconPadding,({theme:e})=>e.colors.fileEntry.text,({theme:e})=>e.sizes.fileEntry.fontSize,({$desktop:e,theme:t})=>e?t.colors.fileEntry.textShadow:void 0,({theme:e})=>e.sizes.fileEntry.iconSize,({theme:e})=>e.sizes.fileEntry.iconSize,({theme:e})=>e.sizes.fileEntry.iconSize,({theme:e})=>e.colors.fileEntry.background,({$desktop:e,theme:t})=>e?`1px solid ${t.colors.fileEntry.border}`:void 0,({theme:e})=>e.colors.fileEntry.backgroundFocused,({$desktop:e,theme:t})=>e?`1px solid ${t.colors.fileEntry.borderFocused}`:void 0,({theme:e,$selecting:t})=>t?e.colors.fileEntry.backgroundFocused:e.colors.fileEntry.backgroundFocusedHover,({$desktop:e,theme:t})=>e?`1px solid ${t.colors.fileEntry.borderFocusedHover}`:void 0);var l=n(11835),s=n(26489),c=n(39726);let u={details:{StyledFileEntry:i,StyledFileManager:a.A},icon:{StyledFileEntry:o,StyledFileManager:l.A},list:{StyledFileEntry:s.A,StyledFileManager:c.A}},d={details:{imgSize:16},detailsSub:{displaySize:8,imgSize:16},icon:{imgSize:48},list:{displaySize:24,imgSize:48},sub:{displaySize:48,imgSize:16}}},43074:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(77232),i=n(75468),a=n(65194);let o=r.Ay.ol.withConfig({componentId:"sc-c7a374a8-0"})(["",";contain:strict;overflow:",";pointer-events:",";scrollbar-gutter:auto;picture:not(:first-of-type){position:absolute;}","{top:0;}"],({$scrollable:e})=>e?(0,a.A)():void 0,({$isEmptyFolder:e,$scrollable:t})=>!e&&t?void 0:"hidden",({$selecting:e})=>e?"auto":void 0,i.z)},49747:(e,t,n)=>{n.d(t,{i:()=>l});var r=n(14232);let i=async e=>{try{if("function"==typeof e.availability)return await e.availability()==="available";if("function"==typeof e.capabilities)return"readily"===(await e.capabilities()).available}catch{}return!1},a=!1,o=async()=>{if(!("ai"in window)||!("languageModel"in window.ai)||"object"!=typeof window.ai.languageModel)return!1;try{return a=await i(globalThis.ai.languageModel)}catch{return!1}},l=()=>{let[e,t]=(0,r.useState)(a),n=(0,r.useCallback)(async()=>{await o()&&t(!0)},[]);return(0,r.useEffect)(()=>{e||requestAnimationFrame(n)},[n,e]),e}},51890:(e,t,n)=>{n.d(t,{A:()=>u});var r=n(14232),i=n(31376),a=n(28229),o=n(65266),l=n(4622),s=n(90143);let c={icon:"",pid:"",url:""},u=(e,t=!1,n=!1,u=!0)=>{let[d,f]=(0,r.useState)(c),m=(0,r.useRef)(!1),p=(0,r.useCallback)(e=>{f(e),m.current=!1},[]),{fs:g,rootFs:b}=(0,a.f)();return(0,r.useEffect)(()=>{if(g&&b&&!m.current&&u&&d===c){m.current=!0;let r=t?"":(0,l.uQ)(e),a=o.O4.has(r)||o.yH.has(r);r&&(!t||o.jj.has(r)||(0,s.tV)(b.mntMap[e]))&&!a?(0,i.O6)(g,e,r,p):(0,i.qz)(g,b,e,t,n,p,!0)}},[g,n,d,t,u,e,b,p]),[d,f]}},53961:(e,t,n)=>{n.d(t,{A:()=>c});var r=n(37876),i=n(14232),a=n(41459),o=n(68133),l=n(65266);let s=(0,i.memo)(({baseIcon:e,icon:t,imgSize:n,isDesktop:s,isFirstImage:c,alt:u,totalSubIcons:d,view:f})=>{let m=(0,i.useMemo)(()=>{let e=![l.D7,l.N9].includes(t)&&!t.startsWith("blob:")&&!t.startsWith(l.jv)&&!t.startsWith(l.zP);return t===l.D7&&"details"===f?{displaySize:16,imgSize:48}:a.H[e?"details"===f?"detailsSub":"sub":f]},[t,f]),p=(0,i.useMemo)(()=>{if(t===l.N9)return{zIndex:3};if(e===l.$6){let e=d-1>1,t=16===n,r=c&&e?t?"matrix(0.4, 0.14, 0, 0.8, -0.5, 2)":"matrix(0.4, 0.14, 0, 0.7, -4, 2)":t?"matrix(0.5, 0.05, 0, 0.8, 3.5, 2)":"matrix(0.5, 0.05, 0, 0.7, 2, 1)";return{objectFit:"cover",transform:`${r} translateZ(0px)`,zIndex:c?2:1}}},[e,t,n,c,d]);return(0,r.jsx)(o.A,{$eager:s||t===l.D7,alt:u,src:t,style:p,...m})}),c=(0,i.memo)(({alt:e,icon:t,imgSize:n,isDesktop:a,showShortcutIcon:o,subIcons:c,view:u})=>{let d=(0,i.useMemo)(()=>o?c?.filter(e=>e!==l.D7):c,[o,c]),f=(0,i.useMemo)(()=>{let e=d?.length;return e&&"details"===u&&d[e-1]===l.N9?[]:d?.filter(e=>e!==t)||[]},[t,d,u]);return(0,r.jsx)(r.Fragment,{children:f.map((i,o)=>(0,r.jsx)(s,{alt:e,baseIcon:t,icon:i,imgSize:n,isDesktop:a,isFirstImage:0===o,totalSubIcons:f.length,view:u},i))})})},54974:(e,t,n)=>{n.d(t,{A:()=>v,t:()=>f});var r=n(14232),i=n(9394),a=n(48940),o=n(92336),l=n(96668),s=n(65287),c=n(65266),u=n(4622),d=n(19719);let f=e=>{try{return document.querySelector(`main > nav > div[title='${CSS.escape(e)}']`)}catch{return}},m=!1,p=!1,g=!1,b=e=>((0,u.CH)(e),!!g||(g=!0,setTimeout(()=>{g=!1},c.Sq),!1)),h=new Set(["ARROWDOWN","ARROWUP","D","E","R","S","X"]),w=e=>{let{altKey:t,ctrlKey:n,shiftKey:r,metaKey:i}=e;window.globalKeyStates={altKey:t,ctrlKey:n,metaKey:i,shiftKey:r}},v=()=>{let{closeWithTransition:e,minimize:t,open:n}=(0,a.N)(),c=(0,s.w)(),{foregroundId:g,stackOrder:v}=(0,o.w)(),{fullscreenElement:y,toggleFullscreen:x}=(0,l.T)(),{onMaximize:k,onMinimize:A}=(0,d.A)(g),E=(0,r.useRef)({}),S=(0,r.useRef)({E:()=>n("FileExplorer"),ESCAPE:()=>f(i.r5)?.click(),F10:()=>n("Terminal"),F12:()=>n("DevTools"),F5:()=>window.location.reload(),R:()=>n("Run"),S:()=>f(i.BN)?.click(),X:()=>f(i.r5)?.dispatchEvent(new MouseEvent("contextmenu",{clientX:1,clientY:(0,u.Bv)()-1}))});(0,r.useEffect)(()=>{let e=e=>{w(e);let{altKey:t,ctrlKey:n,key:r,shiftKey:i}=e,a=r?.toUpperCase();a&&(i?(n||!h.has(a))&&S.current?.[a]&&!b(e)&&S.current[a]():"F11"===a?((0,u.CH)(e),x()):document.activeElement===document.body&&a.startsWith("ARROW")?document.body.querySelector("main ol li button")?.dispatchEvent(new MouseEvent("mousedown",{bubbles:!0})):n&&t&&E.current?.[a]?E.current?.[a]?.():y===document.documentElement&&("META"===a?m=!0:t&&E.current?.[a]?((0,u.CH)(e),E.current?.[a]?.()):"ESCAPE"===a?document.pointerLockElement?document.exitPointerLock():x():m&&h.has(a)&&S.current?.[a]&&!b(e)&&(p=!0,S.current[a]())))},t=e=>{w(e),m&&y===document.documentElement&&e.key?.toUpperCase()==="META"&&(m=!1,p?p=!1:f(i.r5)?.click())};return document.addEventListener("keydown",e,{capture:!0}),document.addEventListener("keyup",t,{capture:!0,passive:!0}),()=>{document.removeEventListener("keydown",e,{capture:!0}),document.removeEventListener("keyup",t,{capture:!0})}},[y,x]),(0,r.useEffect)(()=>{E.current={...E.current,F4:()=>e(g)}},[e,g]),(0,r.useEffect)(()=>{S.current={...S.current,ARROWDOWN:()=>{let{hideMinimizeButton:e=!1,maximized:t,minimized:n}=c.current[g]||{};t?k():n||e||A(!0)},ARROWUP:()=>{let{allowResizing:e=!0,hideMaximizeButton:t=!1,maximized:n,minimized:r}=c.current[g]||{};r?A(!0):n||!e||t||k()},D:()=>(0,u.UH)(c.current,v,t)}},[g,t,k,A,c,v])}},58196:(e,t,n)=>{n.d(t,{A:()=>p});var r=n(79052),i=n(14232),a=n(58688),o=n(59029),l=n(35575),s=n(28229),c=n(48940),u=n(92336),d=n(65266),f=n(4622),m=n(65287);let p=({callback:e,directory:t=d.Bn,id:n,onDragLeave:p,onDragOver:g,updatePositions:b})=>{let{url:h}=(0,c.N)(),w=(0,m.w)(),{iconPositions:v,sortOrders:y,setIconPositions:x}=(0,u.w)(),{exists:k,mkdirRecursive:A,updateFolder:E,writeFile:S}=(0,s.f)(),M=(0,i.useCallback)(async(e,t,i)=>{if(n)if(t){let a=(0,r.join)(d.Bn,e);if(await A(d.Bn),await S(a,t,!0))return i===l.z.UPDATE_URL&&h(n,a),E(d.Bn,e),(0,r.basename)(a)}else i===l.z.UPDATE_URL&&h(n,e);return""},[n,A,E,h,S]),{openTransferDialog:C}=(0,a.A)();return{onDragLeave:p,onDragOver:(0,i.useCallback)(e=>{g?.(e),(0,f.CH)(e)},[g]),onDrop:(0,i.useCallback)(i=>{if(d.jj.has((0,f.uQ)(t)))return;if(i.target instanceof HTMLElement){if(i.target.closest(".focus-within")?.contains(i.target))return;if(b){let{files:e,text:n}=(0,o.bn)(i);if(0===e.length&&""===n)return;(async()=>{let a={x:i.clientX,y:i.clientY},o=[];if(n){try{o=JSON.parse(n)}catch{}if(!Array.isArray(o))return;let[e]=o;if(!e||e.startsWith(t)&&(0,r.basename)(e)===(0,r.relative)(t,e))return;o=o.map(e=>(0,r.basename)(e))}else o=e instanceof FileList?[...e].map(e=>e.name):[...e].map(e=>e.getAsFile()?.name||"").filter(Boolean);o=await (0,f.$I)(o,t,v,k),(0,f.$Y)(t,i.target,v,y,a,o,x,k)})()}}let a="string"==typeof n;a&&!b&&t===d.Bn&&w.current[n]?.componentWindow?.focus(d.VD),(0,o.nX)(i,e||M,t,C,a)},[e,t,k,v,n,C,w,x,y,b,M])}}},65194:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(77232),i=n(65266);let a={dark:{active:"rgb(166, 166, 166)",blendMode:"color-burn",buttonHover:"rgb(55, 55, 55)",thumb:"rgb(77, 77, 77)",thumbHover:"rgb(122, 122, 122)",track:"rgb(23, 23, 23)"},light:{active:"rgb(96, 96, 96)",blendMode:"color-dodge",buttonHover:"rgb(218, 218, 218)",thumb:"rgb(205, 205, 205)",thumbHover:"rgb(166, 166, 166)",track:"rgb(240, 240, 240)"}},o=(e=i.Gm,t=0,n=0,o="dark")=>(0,r.AH)(["overflow:auto;scrollbar-gutter:stable;@supports not selector(::-webkit-scrollbar){scrollbar-color:"," ",";}&::-webkit-scrollbar{height:","px;width:","px;}&::-webkit-scrollbar-corner,&::-webkit-scrollbar-track{background-color:",";}&::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:",";}&::-webkit-scrollbar-thumb:vertical{background-clip:padding-box;background-color:",";border-left:1px solid transparent;border-right:1px solid transparent;}&::-webkit-scrollbar-thumb:horizontal{border-bottom:1px solid transparent;border-top:1px solid transparent;}&::-webkit-scrollbar-thumb:hover{background-color:",";}&::-webkit-scrollbar-thumb:active{background-color:",";}&::-webkit-scrollbar-button:single-button{background-clip:padding-box;background-color:",";background-position:center 4px;background-repeat:no-repeat;background-size:10px;border:1px solid ",";display:block;height:",";&:hover{background-color:",";}&:active{background-color:",";}}&::-webkit-scrollbar-button:single-button:vertical:decrement,&::-webkit-scrollbar-button:single-button:vertical:increment{background-position-x:",";background-position-y:",";background-size:16px;border-bottom:0;border-top:0;image-rendering:pixelated;}&::-webkit-scrollbar-button:single-button:vertical:decrement{background-image:url(",");}&::-webkit-scrollbar-button:single-button:vertical:increment{background-image:url(",");}&::-webkit-scrollbar-button:single-button:horizontal:decrement,&::-webkit-scrollbar-button:single-button:horizontal:increment{background-position:center;background-size:16px;border-left:0;border-right:0;image-rendering:pixelated;}&::-webkit-scrollbar-button:single-button:horizontal:decrement{background-image:url(",");}&::-webkit-scrollbar-button:single-button:horizontal:increment{background-image:url(",");}&::-webkit-scrollbar-button:single-button:vertical:decrement:active,&::-webkit-scrollbar-button:single-button:vertical:increment:active,&::-webkit-scrollbar-button:single-button:horizontal:decrement:active,&::-webkit-scrollbar-button:single-button:horizontal:increment:active{background-blend-mode:",";}"],a[o].thumb,a[o].track,e,e,a[o].track,a[o].thumb,a[o].thumb,a[o].thumbHover,a[o].active,a[o].track,a[o].track,e?`${e}px`:"initial",a[o].buttonHover,a[o].active,0===t?"center":`${t}px`,0===n?"center":`${n}px`,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAKElEQVR42mOgMRgF6enp/ynSDMMUaEZgsjST5RJsikk2AKc4bcAoAADI7y5FsB5j/QAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAK0lEQVR42mOgARgF6enp/0kRZ8KvGMEnyQUwjMwn0xBMzWQZQlmA0h6MAgAuqCnfdOk/ZQAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAG0lEQVR42mPAD0ZBenr6fxge4ppHuiGEwSgAAGJiLkXUVlYDAAAAAElFTkSuQmCC","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAG0lEQVR42mPADkZBenr6fxgeZoYMV82Ug1EAAPiTLkWjutmQAAAAAElFTkSuQmCC",a[o].blendMode)},68380:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(14232),i=n(65266);let a=(e,t=!1)=>{let n=(0,r.useRef)(0),a=(0,r.useRef)(0);return{onClick:(0,r.useCallback)(r=>{let o=()=>{r.stopPropagation(),e(r)},l=()=>{n.current&&(clearTimeout(n.current),n.current=0)},s=()=>{a.current>=12&&l(),0===n.current?(r.target.removeEventListener("pointermove",s),a.current=0):a.current+=1};t?o():0===n.current?(n.current=window.setTimeout(l,i.UW.DOUBLE_CLICK),r.target.addEventListener("pointermove",s,{passive:!0})):(l(),o())},[e,t])}}},71281:(e,t,n)=>{n.d(t,{K:()=>a});var r=n(14232),i=n(65266);let a=(e,t,n=!1)=>{let a=(0,r.useRef)(!1),[o,l]=(0,r.useState)(n);return(0,r.useEffect)(()=>{n||!e.current||a.current||(a.current=!0,new IntersectionObserver(e=>e.forEach(({isIntersecting:e})=>l(e)),{root:"object"==typeof t&&t.current||"string"==typeof t&&e.current.closest(t)||e.current.parentElement,...i.A8}).observe(e.current))},[n,e,t]),o}},75468:(e,t,n)=>{n.d(t,{A:()=>s,z:()=>l});var r=n(37876),i=n(14232),a=n(77232);let o=(0,a.DU)(["body{pointer-events:none;}"]),l=a.Ay.span.withConfig({componentId:"sc-823badd8-0"})(["background-color:",";border:",";position:absolute;z-index:2;"],({theme:e})=>e.colors.selectionHighlightBackground,({theme:e})=>`1px solid ${e.colors.selectionHighlight}`),s=(0,i.memo)(e=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o,{}),(0,r.jsx)(l,{...e})]}))},78911:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(14232);let i=(e,t)=>{let[n,i]=(0,r.useState)();(0,r.useEffect)(()=>{t&&i(new ResizeObserver(t))},[t]),(0,r.useEffect)(()=>(e instanceof HTMLElement&&n?.observe(e),()=>{e instanceof HTMLElement&&n?.unobserve(e)}),[e,n])}},82103:(e,t,n)=>{n.d(t,{_:()=>o});var r=n(14232);let i=!1,a=async()=>{let e;if("undefined"==typeof navigator||!("gpu"in navigator))return!1;try{e=await navigator.gpu.requestAdapter()}catch{return!1}if(!e)return!1;let t=0x40000000>(e.limits.maxBufferSize??0)||0x40000000>(e.limits.maxStorageBufferBindingSize??0)||32768>(e.limits.maxComputeWorkgroupStorageSize??0);return t||(i=!0),!t},o=()=>{let[e,t]=(0,r.useState)(i),n=(0,r.useCallback)(async()=>{await a()&&t(!0)},[]);return(0,r.useEffect)(()=>{e||requestAnimationFrame(n)},[n,e]),e}},83050:(e,t,n)=>{n.d(t,{a:()=>a});let r={capture:!0,passive:!0},i={capture:!1,passive:!0},a=(e,t=!1,n=1,a=!1)=>{e&&requestAnimationFrame(()=>{let o=()=>{t||(e.style.background=""),e.style.borderImage=""};if(t){let t=({clientX:i,clientY:l})=>{if(e.isConnected){let{x:t,y:r}=e.getBoundingClientRect(),o=a&&document.elementFromPoint(i,l)===e;e.style.borderImage=`radial-gradient(75px at ${i-t}px ${l-r}px, rgba(${o?"255, 255, 255, 80%":"200, 200, 200, 60%"}), transparent) 1 / ${n}px / 0 stretch`}else document.removeEventListener("mousemove",t,r),document.removeEventListener("mouseleave",o,r)};document.addEventListener("mousemove",t,r),document.addEventListener("mouseleave",o,r)}else e.addEventListener("mousemove",({offsetX:t,offsetY:r})=>{e.style.background=`radial-gradient(circle at ${t}px ${r}px, rgba(200, 200, 200, 30%), transparent)`,e.style.borderImage=`radial-gradient(75px at ${t}px ${r}px, rgba(200, 200, 200, 60%), transparent) 1 / ${n}px / 0 stretch`},i),e.addEventListener("mouseleave",o,i)})}},93807:(e,t,n)=>{let r,i;n.d(t,{A:()=>ev});var a=n(37876),o=n(79052),l=n(14232),s=n(18847),c=n.n(s),u=n(28124),d=n(77232);let f=d.Ay.footer.withConfig({componentId:"sc-1b05d613-0"})(["align-items:center;background-color:rgb(51 51 51);bottom:0;color:rgb(247 247 247);display:flex;font-size:12px;font-weight:200;height:",';padding:0 4px 0 5px;position:absolute;white-space:nowrap;width:100%;div{display:flex;margin-top:-1px;padding:0 3px 0 9px;&::after{border-right:1px solid rgb(247 247 247);content:"";height:11px;margin-left:12px;position:relative;top:3px;}&.selected{padding-left:7px;&::after{margin-left:13px;}}}nav{display:flex;position:absolute;right:4px;button{border:1px solid transparent;display:flex;height:',";place-content:center;place-items:center;width:22px;picture{position:relative;top:-1px;}&:hover{background-color:rgb(77 77 77);border:1px solid rgb(99 99 99);}&.active{background-color:rgb(102 102 102);border:1px solid rgb(131 131 131);picture{padding-left:1px;top:0;}}}}"],({theme:e})=>e.sizes.fileExplorer.statusBarHeight,({theme:e})=>e.sizes.fileExplorer.statusBarHeight);var m=n(28229),p=n(78911),g=n(4622),b=n(90143),h=n(68133),w=n(2636);let v=(0,l.memo)(({count:e,directory:t,fileDrop:n,selected:r,setView:i,view:s})=>{let{exists:c,lstat:u,stat:v}=(0,m.f)(),[y,x]=(0,l.useState)(b.df),[k,A]=(0,l.useState)(!1),{sizes:E}=(0,d.DP)(),S=(0,l.useCallback)(e=>A(e>E.fileExplorer.minimumStatusBarWidth),[E.fileExplorer.minimumStatusBarWidth]),M=(0,l.useRef)(null);return(0,l.useEffect)(()=>{(async()=>x(await r.reduce(async(e,n)=>{let r=await e;if(-2===r)return -2;let i=(0,o.join)(t,n);try{if(await c(i))return(await u(i)).isDirectory()?-2:(r===b.df?0:r)+(await v(i)).size}catch{}return e},Promise.resolve(b.df))))()},[t,c,u,r,v]),(0,l.useLayoutEffect)(()=>{M.current&&S(M.current.getBoundingClientRect().width)},[S]),(0,p.A)(M.current,(0,l.useCallback)(([{contentRect:{width:e=0}={}}])=>S(e),[S])),(0,a.jsxs)(f,{ref:M,onContextMenuCapture:g.CH,...n,children:[(0,a.jsxs)("div",{...(0,g.Pf)("Total item count"),children:[e," item",1===e?"":"s"]}),k&&r.length>0&&(0,a.jsxs)("div",{className:"selected",...(0,g.Pf)("Selected item count and size"),children:[r.length," item",1===r.length?"":"s"," selected",y!==b.df&&-2!==y?`\u00A0\u00A0${(0,g.ET)(y)}`:""]}),(0,a.jsxs)("nav",{className:"views",children:[(0,a.jsx)(w.A,{className:"details"===s?"active":void 0,onClick:()=>i("details"),...(0,g.Pf)("Displays information about each item\nin the window.  (Ctrl+Shift+6)"),children:(0,a.jsx)(h.A,{displaySize:16,imgSize:16,src:"/System/Icons/details_view.webp"})}),(0,a.jsx)(w.A,{className:"icon"===s?"active":void 0,onClick:()=>i("icon"),...(0,g.Pf)("Display items by using medium\nthumbnails.  (Ctrl+Shift+3)"),children:(0,a.jsx)(h.A,{displaySize:16,imgSize:16,src:"/System/Icons/icon_view.webp"})})]})]})}),y=["name","date","type","size"],x={date:{name:"Date modified",width:133},name:{name:"Name",width:133},size:{name:"Size",width:70},type:{name:"Type",width:80}};var k=n(89426);let A=d.Ay.figure.withConfig({componentId:"sc-5e52ee6b-0"})(["pointer-events:",";figcaption{pointer-events:none;}"],({$renaming:e})=>e?"all":void 0);var E=n(53961),S=n(31376),M=n(48940),C=n(31157),j=n(92336),z=n(65287),$=n(65266);let D=(e,t)=>{let{setForegroundId:r,updateRecentFiles:i}=(0,j.w)(),{createPath:a,updateFolder:s}=(0,m.f)(),{minimize:c,open:u,url:d}=(0,M.N)(),f=(0,z.w)();return(0,l.useCallback)(async(l,m)=>{let{preferProcessIcon:p,singleton:b,icon:h}=C.A[l]||{},w=b?Object.keys(f.current).find(e=>e===l||e.startsWith(`${l}${$.QB}`)):"",v=e;if(e.startsWith("ipfs://")){let{getIpfsFileName:t,getIpfsResource:r}=await n.e(8475,"high").then(n.bind(n,88475)),i=await r(e);v=(0,o.join)($.Bn,await a(await t(e,i),$.Bn,i)),s($.Bn,(0,o.basename)(v))}if(w)d(w,v),f.current[w].minimized&&c(w),r(w);else{u(l||"OpenWith",{url:v},b||m===$.$6||p?h:m);let e=v||t;e&&l&&i(e,l,(0,g.t$)(e)?(0,o.basename)(t,(0,o.extname)(t)):void 0)}},[a,c,u,t,f,r,d,s,i,e])},R=new Set([".001",".7z",".ace",".apk",".appx",".arj",".bz2",".bzip2",".cab",".chm",".chw",".cpio",".deb",".dll",".dmg",".doc",".docx",".epub",".esd",".exe",".flv",".gz",".gzip",".hfs",".hxs",".img",".ipa",".jar",".lha",".lit",".lzh",".lzma",".mbr",".msi",".ntfs",".ods",".odt",".ova",".pages",".pkg",".ppt",".qcow",".qcow2",".r00",".rar",".rpm",".squashfs",".swf",".swm",".sys",".tar",".taz",".tgz",".txz",".udf",".vdi",".vhd",".vhdx",".vmdk",".wim",".xar",".xip",".xls",".xlsx",".xpi",".xz",".z",".zipx"]);var H=n(98879),T=n(1721);let O=new Set([".aac",".aiff",".ape",".flac",".m4a",".mp3",".oga",".ogg",".wav",".wma"]),F=[".aac",".mp3",".ogg",".wav"],L=new Set([".avi",".flv",".m4v",".mkv",".mov",".mp4",".mpeg",".mpg",".ogv",".webm",".wmv"]),W=[".avi",".gif",".mkv",".mp4",".ogg",".ogv",".webm"],B=new Set([".bmp",".gif",".ico",".jpeg",".jpg",".png",".psd",".tiff",".xcf"]),P=[".bmp",".gif",".jpg",".png",".psd",".svg",".tiff"];var I=n(5537),N=n(49747),U=n(54974),G=n(58688),Q=n(82909).Buffer;let{alias:V}=$.sx;var K=n(51890),q=n(58196),Y=n(41459),X=n(68380),_=n(83050),Z=n(71281),J=n(82909).Buffer;let ee=c()(()=>n.e(8311,"high").then(n.bind(n,98311)),{loadableGenerated:{webpack:()=>[98311]}}),et=c()(()=>n.e(955,"high").then(n.bind(n,10955)).then(e=>e.Down),{loadableGenerated:{webpack:()=>[10955]}}),en=c()(()=>n.e(5989,"high").then(n.bind(n,5989)),{loadableGenerated:{webpack:()=>[5989]}}),er=[],ei=[],ea=(0,l.memo)(({columns:e,fileActions:t,fileManagerId:r,fileManagerRef:i,focusedEntries:s,focusFunctions:c,hideShortcutIcon:u,isDesktop:f,isHeading:p,isLoadingFileManager:v,loadIconImmediately:y,name:x,path:ea,readOnly:eo,renaming:el,selectionRect:es,setRenaming:ec,stats:eu,hasNewFolderIcon:ed,view:ef})=>{let{blurEntry:em,focusEntry:ep}=c,{url:eg}=(0,M.N)(),eb=(0,l.useRef)(null),eh=(0,Z.K)(eb,i,f),ew=(0,l.useMemo)(()=>eu.isDirectory(),[eu]),[{comment:ey,getIcon:ex,icon:ek,pid:eA,subIcons:eE,url:eS},eM]=(0,K.A)(ea,ew,ed,!0),eC=D(eS,ea),{createPath:ej,exists:ez,fs:e$,mkdirRecursive:eD,pasteList:eR,readdir:eH,stat:eT,updateFolder:eO,writeFile:eF}=(0,m.f)(),[eL,eW]=(0,l.useState)(!1),{formats:eB,sizes:eP}=(0,d.DP)(),eI=(0,l.useMemo)(()=>"list"===ef,[ef]),eN=(0,l.useMemo)(()=>"details"===ef,[ef]),eU=(0,l.useMemo)(()=>(0,o.basename)(ea),[ea]),eG=(0,l.useMemo)(()=>ew?"":(0,g.uQ)(eS),[ew,eS]),eQ=(0,l.useMemo)(()=>!!eS&&(0,g.t$)(eS),[eS]),eV=(0,l.useMemo)(()=>$.O4.has(eG)||$.yH.has(eG)||eQ,[eQ,eG]),eK=(0,l.useMemo)(()=>1===s.length&&s[0]===eU,[eU,s]),eq=(0,l.useMemo)(()=>(0,g.uQ)(ea),[ea]),eY=(0,l.useMemo)(()=>eq===$.b3,[eq]),eX=eY?eS:ea,e_=(0,q.A)({callback:async(e,t)=>{if(!s.includes(eU)){let n=await ej(e,eX,t);if(n)return eO(eX,n),n}return""},directory:eX}),eZ=(0,l.useMemo)(()=>"FileExplorer"===eA,[eA]),eJ=(0,l.useMemo)(()=>((e,t,n,r)=>{let i=e.replace(/-/g,$.Jc),{lines:a,truncatedText:o}=(0,S.AN)(i,t,n,r);if(a.length>2){let t=e.includes(" ")?o:a[0];return`${t.slice(0,-3).trim()}...`}return i})(x,eP.fileEntry.fontSize,eB.systemFont,eP.fileEntry[eI?"maxListTextDisplayWidth":"maxIconTextDisplayWidth"]),[eB.systemFont,eI,x,eP.fileEntry]),e0=(0,l.useRef)(null),e1=(0,l.useRef)(!1),e2=(0,l.useRef)(!1),e3=(0,l.useRef)(void 0),e4=(0,l.useCallback)(async()=>{if(ew)return"";if(eY){if(ey)return ey;if(eS){if(eS.startsWith("http:")||eS.startsWith("https:"))return decodeURIComponent(eS);let e=(0,o.dirname)(eS);return`Location: ${(0,o.basename)(eS,(0,o.extname)(eS))}${!e||"."===e?"":` (${(0,o.dirname)(eS)})`}`}return""}let e=(0,S.ti)(eq),t=eu.size===b.df?await eT(ea):eu,{size:n}=t,r=(0,g.ET)(n),i=`Type: ${e}${"-1 bytes"===r?"":`
Size: ${r}`}`,a=(0,S.y8)(ea,t,eB.dateModified);return`${i}
Date modified: ${a}`},[ey,eq,eB.dateModified,ew,eY,ea,eT,eu,eS]),[e6,e5]=(0,l.useState)(),e9=(0,l.useCallback)(()=>{eZ&&r&&!window.globalKeyStates?.ctrlKey&&!$.jj.has(eG)?(eg(r,eS),em()):eZ&&eI?eW(e=>!e):eC(eA,eV?void 0:ek)},[em,eg,r,ek,eV,eI,eC,eZ,eA,eS,eG]),e7=(0,l.useMemo)(()=>eh&&void 0!==e&&eN,[e,eN,eh]),e8=(0,l.useMemo)(()=>e7&&e?e.name.width-eP.fileManager.detailsStartPadding:0,[e,e7,eP.fileManager.detailsStartPadding]),te=(0,l.useRef)(!1),tt=(0,l.useCallback)(()=>{te.current||(te.current=!0,eH(ea).then(e=>e.map(e=>(0,S.lH)((0,o.join)(ea,e))||{}).forEach(({icon:e})=>e&&(0,g.NN)(e))))},[ea,eH]),tn=(0,l.useCallback)(()=>{eI&&ew&&tt(),e4().then(e5)},[e4,ew,eI,tt]),tr=(0,l.useMemo)(()=>({maxWidth:e8,minWidth:e8}),[e8]),ti=(0,l.useCallback)((e,n)=>{t.renameFile(e,n),ec("")},[t,ec]);return(0,l.useEffect)(()=>{(async()=>{if(!v&&!e1.current&&(!eN||$._i.has(eG))){let e=async()=>{if(ek.startsWith("blob:")){e1.current=!0;return}if(ek.startsWith("data:")){if(ek.startsWith("data:image/jpeg;base64,")||(e1.current=!0,eV))return;let e=(0,o.join)($.jv,`${ea}${$.V9}`);if(".ico"!==eG&&!eS.startsWith($.uH)&&!eS.startsWith($._O)&&!await ez(e)&&e0.current instanceof HTMLImageElement){let t=async n=>{if(e0.current instanceof HTMLImageElement){let r="";if(e0.current.currentSrc.startsWith("data:image/gif;base64,")||e0.current.currentSrc.startsWith("data:image/png;base64,"))r=e0.current.currentSrc;else if(e0.current.currentSrc.startsWith("blob:"))r=await (0,g.Sk)(await (0,g.sZ)(e0.current.currentSrc));else{let e,i,a,{clientHeight:o,clientWidth:l}=e0.current,{naturalHeight:s,naturalWidth:c}=e0.current,u=c/s;u!==l/o&&(c>s?e=o/u:i=l*u);let d=await (0,g.em)();try{a=await d?.toCanvas(e0.current,{height:e,skipAutoScale:!0,style:{objectPosition:e?"top":i?"left":void 0},width:i})}catch{}a&&((0,g.b0)(a)||n)?r=a.toDataURL("image/png"):setTimeout(()=>t(!0),$.UW.WINDOW)}r&&ei.push(async()=>{let t=(0,o.dirname)(e);await eD(t);let n=J.from(r.replace(/data:.*;base64,/,""),"base64");return await eF(e,n,!0),eM(e=>({...e,icon:(0,g.Zd)(n)})),eO(t,(0,o.basename)(e)),ei.shift(),ei[0]?.()}),1===ei.length&&await ei[0]()}};e0.current.complete?t():e0.current.addEventListener("load",()=>t(),$.w3)}}else if(!eY||"function"==typeof ex||eQ){if(e1.current||!e$)return;let e=await (0,S.$j)(e$,(0,o.join)($.jv,`${ea}${$.V9}`));e?e1.current||(e1.current=!0,eM(t=>({...t,icon:e}))):!e2.current&&eb.current&&"function"==typeof ex&&(e3.current=new AbortController,await ex(e3.current.signal),e2.current=!e3.current.signal.aborted)}};await e()}})()},[eN,ez,e$,ex,ek,v,eY,eQ,eD,ea,eM,eO,eS,eG,eF]),(0,l.useEffect)(()=>()=>{ek.startsWith("blob:")&&URL.revokeObjectURL(ek);try{e3.current?.abort()}catch{}},[ek]),(0,l.useEffect)(()=>{ew&&eI&&tt()},[ew,eI,tt]),(0,l.useEffect)(()=>()=>{try{e3.current?.abort()}catch{}},[]),(0,l.useLayoutEffect)(()=>{if(eb.current&&i.current){let e=s.includes(eU),t=er.includes(eU),n=e||t;if(e&&t&&er.splice(er.indexOf(eU),1),es){let e=((e,t,n,r)=>{let{x:i=0,y:a=0,width:o=0,height:l=0}=n,s=new DOMRect(i,a,Number(o),Number(l));return!(e.left-t.left>=s.right||e.top-t.top>=s.bottom||e.right-t.left<=s.left||e.bottom-t.top+r<=s.top)})(eb.current.getBoundingClientRect(),i.current.getBoundingClientRect(),es,i.current.scrollTop);e&&!n?(er.push(eU),ep(eU),eb.current.focus($.VD)):!e&&n&&em(eU)}else n&&eb.current!==document.activeElement&&1===s.length&&!eb.current.contains(document.activeElement)&&eb.current.focus($.VD)}},[em,i,eU,ep,s,es]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(w.A,{ref:eb,"aria-label":x,onMouseOverCapture:tn,title:e6,...eI&&{...$.P4,as:k.m.button},...(0,X.A)(e9,eI),...eZ&&e_,...((e,t,r,i,{archiveFiles:a,deleteLocalPath:s,downloadFiles:c,extractFiles:u,newShortcut:d},{blurEntry:f,focusEntry:p},h,w,v,y)=>{let{close:x,minimize:k,open:A,url:E}=(0,M.N)(),K=(0,z.w)(),{aiEnabled:q,setCursor:Y,setForegroundId:X,setIconPositions:_,setWallpaper:Z,updateRecentFiles:J}=(0,j.w)(),ee=(0,o.basename)(r),et=(0,l.useMemo)(()=>h.includes(ee),[ee,h]),en=D(e,r),{copyEntries:er,createPath:ei,lstat:ea,mapFs:eo,moveEntries:el,readFile:es,rootFs:ec,unMapFs:eu,updateFolder:ed}=(0,m.f)(),{contextMenu:ef}=(0,T.b)(),em=(0,N.i)(),{openTransferDialog:ep}=(0,G.A)(),{onContextMenuCapture:eg,...eb}=(0,l.useMemo)(()=>ef?.(()=>{let l=(0,g.uQ)(e),{process:f=[]}=l in H.A?H.A[l]:{},m=f.filter(e=>e!==t).filter(e=>e!==t),p=1===h.length||!et,M=()=>p?[r]:[...new Set([r,...h.map(e=>(0,o.join)((0,o.dirname)(r),e))])],j=[],z=(0,g.uQ)(r),D=z===$.b3,T=ec?.mountList.some(e=>e===r&&(0,b.tV)(ec?.mntMap[e]));if(!y&&!T){let f=(0,S.YD)(l);if(j.push({action:()=>el(M()),label:"Cut"},{action:()=>er(M()),label:"Copy"},$.kG),(f||D||!z&&!l)&&j.push({action:()=>M().forEach(async e=>{let t=f&&!(await ea(e)).isDirectory()?f:"FileExplorer";d(e,t)}),label:"Create shortcut"}),j.push({action:()=>{(0,o.dirname)(r)===$.Bn&&(0,g.Rp)(_),M().forEach(e=>s(e))},label:"Delete"},{action:()=>i(ee),label:"Rename"},$.kG,{action:()=>{let t=Object.keys(K.current).find(t=>t===`Properties${$.QB}${e}`);t?(K.current[t].minimized&&k(t),X(t)):A("Properties",{shortcutPath:D?r:void 0,url:D?r:e})},label:"Properties"}),r)if(r===(0,o.join)($.Bn,$.YH)){if("function"==typeof FileSystemHandle){let e=(e,t)=>{eo(e,t).then(e=>{ed("/",e),A("FileExplorer",{url:(0,o.join)("/",e)})}).catch(()=>{})},t="showDirectoryPicker"in window,n="function"==typeof navigator.storage?.getDirectory&&!(0,g.nr)();j.unshift(...t?[{action:()=>e("/"),label:"Map directory"}]:[],...n?[{action:async()=>{try{e("/OPFS",await navigator.storage.getDirectory())}catch{}},label:"Map OPFS"}]:[],...t||n?[$.kG]:[])}}else{j.unshift($.kG);let i=O.has(z),s=B.has(z),d=L.has(z);if(i||s||d){let e=i||d;j.unshift($.kG,{label:"Convert to",menu:(e?i?F:W:P).filter(e=>e!==z).map(t=>{let i=t.replace(".","");return{action:async()=>{ep(void 0,r,"Converting");let t=(0,o.dirname)(r);try{let a=e?(await n.e(3444,"high").then(n.bind(n,11063))).transcode:(await n.e(8257,"high").then(n.bind(n,98257))).convert,l=M().map(e=>{let n=!1;return{abort:()=>{n=!0},directory:t,name:(0,o.basename)(e),operation:"Converting",read:async()=>{if(!n)try{let[[n,r]]=await a([[e,await es(e)]],i);ed(t,await ei((0,o.basename)(n),t,r))}catch{}}}});ep(l,r)}catch(e){x(`Transfer${$.QB}${r}`)}},label:i.toUpperCase()}})})}$.Mk.includes(z)&&j.unshift($.kG,{label:"Convert to",menu:$.Mk.filter(e=>e!==z).map(e=>{let t=e.replace(".","");return{action:()=>{M().forEach(async e=>{let i=`${(0,o.dirname)(e)}/${(0,o.basename)(e,(0,o.extname)(e))}.${t}`,{convertSheet:a}=await n.e(3243,"high").then(n.bind(n,63243)),l=await a(await es(e),t),s=(0,o.dirname)(r);ed(s,await ei((0,o.basename)(i),s,Q.from(l)))})},label:t.toUpperCase()}})}),".m3u"!==z&&$.hL.has(z)&&j.unshift($.kG,{action:()=>{M().forEach(async e=>{let t=`${(0,o.dirname)(e)}/${(0,o.basename)(e,(0,o.extname)(e))}.m3u`,{createM3uPlaylist:i,tracksFromPlaylist:a}=await n.e(1459,"high").then(n.bind(n,1459)),l=i(await a((await es(e)).toString(),(0,g.uQ)(e))),s=(0,o.dirname)(r);ed(s,await ei((0,o.basename)(t),s,Q.from(l)))})},label:"Convert to M3U"});let b="FileExplorer"===t;if(p&&!b&&!(0,g.t$)(e)){let t=(0,o.basename)(e),n={text:`${t} - ${V}`,title:t,url:`${window.location.origin}?url=${e}`};try{!ec?.mountList.some(e=>"/"!==e&&r.startsWith(`${e}/`))&&(0,S.Aw)(w)&&navigator.canShare?.(n)&&j.unshift({SvgIcon:I.SY,action:()=>navigator.share(n),label:"Share"})}catch{}}j.unshift({action:()=>a(M()),label:"Add to archive..."},...R.has(l)||$.jj.has(l)?[{action:()=>u(e),label:"Extract Here"},$.kG]:[],{action:()=>c(M()),label:"Download"}),D||b||$.hr.forEach(e=>{e===f||m.includes(e)||m.push(e)})}j.unshift($.kG)}T&&j.push($.kG,{action:()=>eu(r,ec?.mntMap[r].getName()!=="FileSystemAccess"),label:"Disconnect"}),$.PD.has(l)&&j.unshift({action:()=>{A("Paint",{url:e}),e&&J(e,"Paint")},label:"Edit"}),$.Dh.has(l)&&j.unshift({action:()=>Y(e),label:"Set as mouse pointer"}),(q||em&&"summarizer"in window.ai)&&$.$h.has(l)&&j.unshift($.kG,{action:()=>(t=>{window.initialAiPrompt=`${t}: ${e}`;let n=document.querySelector("main > section > footer > button.new-topic");n?n?.click():(0,U.t)($.K1)?.click()})("Summarize"),label:"Summarize Text (AI)"});let N=$.yH.has(l);if((N||$.O4.has(l)&&!$.Dh.has(l)&&".svg"!==l)&&j.unshift({label:"Set as background",...N?{action:()=>Z(e)}:{menu:[{action:()=>Z(e,"fill"),label:"Fill"},{action:()=>Z(e,"fit"),label:"Fit"},{action:()=>Z(e,"stretch"),label:"Stretch"},{action:()=>Z(e,"tile"),label:"Tile"},{action:()=>Z(e,"center"),label:"Center"}]}}),m.length>0&&j.unshift({label:"Open with",menu:[...m.map(e=>{let{icon:t,title:n}=C.A[e]||{};return{action:()=>{en(e,t)},icon:t,label:n}}),$.kG,{action:()=>A("OpenWith",{url:e}),label:"Choose another app"}],primary:!t}),t){let{icon:n}=C.A[t]||{};if(D&&e&&"/"!==e&&!e.startsWith("http:")&&!e.startsWith("https:")&&!e.startsWith("nostr:")){let t=""===l||".zip"===l;j.unshift({action:()=>A("FileExplorer",{url:(0,o.dirname)(e)},""),label:`Open ${t?"folder":"file"} location`})}v&&"FileExplorer"===t&&!$.jj.has(l)&&j.unshift({action:()=>{en(t,n)},label:"Open in new window"}),j.unshift({action:()=>{"FileExplorer"===t&&v&&!$.jj.has(l)?E(v,e):en(t,n)},icon:n,label:$.yH.has(l)?"Play":"Open",primary:!0})}return j[0]===$.kG?j.slice(1):j}),[q,a,ee,E,x,ef,er,ei,s,c,u,v,h,em,et,ea,eo,k,el,d,A,en,ep,r,t,K,es,y,ec?.mntMap,ec?.mountList,Y,X,_,i,Z,w,eu,ed,J,e]);return{onContextMenuCapture:e=>{et||(f(),p(ee)),eg(e)},...eb}})(eS,eA,ea,ec,t,c,s,eu,r,eo),children:[(0,a.jsxs)(A,{ref:(0,l.useCallback)(e=>{eI&&(0,g.Qv)()&&(0,_.a)(e)},[eI]),$renaming:el,style:e7?tr:void 0,...p&&{"aria-level":1,role:"heading"},children:[(0,a.jsx)(h.A,{ref:e0,alt:"",src:ek,...Y.H[ef],$moving:"move"===eR[ea],$eager:!0}),(0,a.jsx)(E.A,{alt:"",icon:ek,isDesktop:f,showShortcutIcon:!!(u||eu.systemShortcut),subIcons:eE,view:ef}),el?(0,a.jsx)(en,{isDesktop:f,name:x,path:ea,renameFile:ti,setRenaming:ec,view:ef}):(0,a.jsx)("figcaption",{children:e7||eK&&x.length!==eJ.length?x:eJ}),eI&&eZ&&(0,a.jsx)(et,{flip:eL})]}),e7&&e&&(0,a.jsx)(ee,{columns:e,isDirectory:ew,path:ea,stats:eu})]}),eL&&(0,a.jsx)(ev,{readOnly:eo,url:eS,hideFolders:!0,hideLoading:!0,hideShortcutIcons:!0,isStartMenu:!0,loadIconsImmediately:!0,skipFsWatcher:!0,skipSorting:!0})]})});var eo=n(75468),el=n(59029),es=n(35575),ec=n(10666),eu=n(82103),ed=n(82909).Buffer;let ef=()=>{window.WebampGlobal?.store.dispatch({enabled:!1,type:"SET_MILKDROP_DESKTOP"})},em="video/webm",ep="video/mp4",eg=d.Ay.span.withConfig({componentId:"sc-8dc42996-0"})(["background-color:rgb(32 32 32);display:block;margin-bottom:6px;margin-right:","px;position:sticky;top:0;width:fit-content;z-index:1;ol{display:flex;height:",'px;li{color:rgb(222 222 222);display:flex;font-size:12px;padding-left:6px;place-items:center;position:relative;> svg{fill:rgb(149 149 149);left:calc(50% - 4px);position:absolute;top:0;transition:none !important;width:7px;&[style^="transform"]{top:-1px;}}.name{overflow:hidden;position:relative;text-overflow:ellipsis;top:-1px;white-space:nowrap;}.resize{border-left:1px solid rgb(99 99 99);cursor:col-resize;height:',"px;padding-left:","px;position:absolute;right:-","px;z-index:1;}&:hover{background-color:rgb(67 67 67);.resize{border-left:none;}}&:active{background-color:rgb(131 131 131);}&:first-child{padding-left:17px;}}}"],({theme:e})=>e.sizes.fileManager.detailsStartPadding,({theme:e})=>e.sizes.fileManager.columnHeight,({theme:e})=>e.sizes.fileManager.columnHeight,({theme:e})=>e.sizes.fileManager.columnResizeWidth,({theme:e})=>e.sizes.fileManager.columnResizeWidth),eb=c()(()=>n.e(955,"high").then(n.bind(n,10955)).then(e=>e.Down),{loadableGenerated:{webpack:()=>[10955]}}),eh=(0,l.memo)(({columns:e,directory:t,files:n,setColumns:r})=>{let{sizes:i}=(0,d.DP)(),o=(0,l.useRef)(""),s=(0,l.useRef)(0),{setSortOrder:c,sortOrders:u}=(0,j.w)(),[,f="name",m]=u[t]??[],p=(0,l.useCallback)(e=>t=>{0===t.button&&(o.current="resize"===t.target.className?e:"",s.current=t.clientX)},[]),g=(0,l.useCallback)(e=>{if(o.current){let t=o.current;r(n=>{if(!n?.[t])return n;let r={...n},a=r[t].width+e.clientX-s.current;return a<i.fileManager.columnMinWidth||Math.abs(s.current-e.clientX)>15||(r[t].width=a,s.current=e.clientX),r})}},[r,i.fileManager.columnMinWidth]),b=(0,l.useCallback)(e=>r=>{0===r.button&&(o.current?(o.current="",s.current=0):c(t,Object.keys((0,el.w9)(t,n,e,!m)),e,!m))},[m,t,n,c]);return(0,a.jsx)(eg,{children:(0,a.jsx)("ol",{children:y.map(t=>(0,a.jsxs)("li",{onPointerDownCapture:p(t),onPointerMoveCapture:g,onPointerUpCapture:b(t),style:{width:`${e[t].width}px`},children:[f===t&&(0,a.jsx)(eb,{flip:m}),(0,a.jsx)("div",{className:"name",children:e[t].name}),(0,a.jsx)("span",{className:"resize"})]},e[t].name))})})}),ew=c()(()=>n.e(5288,"high").then(n.bind(n,25288)),{loadableGenerated:{webpack:()=>[25288]}}),ev=(0,l.memo)(({allowMovingDraggableEntries:e,hideFolders:t,hideLoading:s,hideScrolling:c,hideShortcutIcons:f,id:p,isDesktop:h,isStartMenu:w,loadIconsImmediately:y,readOnly:k,showStatusBar:A,skipFsWatcher:E,skipSorting:C,url:D})=>{let{views:R,setViews:H}=(0,j.w)(),O=(0,l.useMemo)(()=>h?"icon":w?"list":R[D]||"icon",[h,w,D,R]),F=(0,l.useMemo)(()=>"details"===O,[O]),[L,W]=(0,l.useState)(()=>F?x:void 0),[B,P]=(0,l.useState)(D),[I,N]=(0,l.useState)(""),[U,Q]=(0,l.useState)(!1),[V,K]=(0,l.useState)(40),X=(0,l.useRef)(null),_=(0,l.useRef)(null),Z=(0,l.useRef)(null),{focusedEntries:J,focusableEntry:ee,...et}=((e,t)=>{let[n,r]=(0,l.useState)([]),i=(0,l.useCallback)(e=>r(e?t=>t.filter(t=>t!==e):[]),[]),a=(0,l.useCallback)(e=>r(t=>t.includes(e)?t:[...t,e]),[]),o=(0,l.useRef)(!1),s=(0,l.useCallback)(t=>{let{relatedTarget:n,target:r}=t,a=e.current===n;a&&o.current?((0,g.CH)(t),r?.focus($.VD)):(a||e.current?.contains(n))&&n instanceof HTMLElement||i()},[i,e]),c=(0,l.useCallback)(()=>{o.current=!0,window.requestAnimationFrame(()=>{o.current=!1})},[]),u=(0,l.useRef)({x:0,y:0}),{formats:f,sizes:m}=(0,d.DP)(),p=(0,l.useCallback)(r=>{let o=n.includes(r),l=r.replace($.b3,""),d=0;if(t){let{lines:t}=(0,S.AN)(l,m.fileEntry.fontSize,f.systemFont,m.fileEntry.maxIconTextDisplayWidth);if(t.length>1)try{let n=e.current?.querySelector(`[aria-label='${CSS.escape(l)}'] figcaption`);n&&(d=(t.length-1)*Number.parseFloat(window.getComputedStyle(n).lineHeight))}catch{}}return{$labelHeightOffset:d,className:o?"focus-within":void 0,onBlurCapture:s,onFocusCapture:c,onMouseDown:({ctrlKey:e,pageX:t,pageY:n})=>{u.current={x:t,y:n},e?o?i(r):a(r):o||(i(),a(r))},onMouseUp:({ctrlKey:e,pageX:t,pageY:o,button:l})=>{let{x:s,y:c}=u.current;e||0!==l||s!==t||c!==o||1===n.length||n[0]===r||(i(),a(r)),u.current={x:0,y:0}}}},[t,i,e,a,n,f.systemFont,s,c,m.fileEntry.fontSize,m.fileEntry.maxIconTextDisplayWidth]);return{blurEntry:i,focusEntry:a,focusableEntry:p,focusedEntries:n}})(X,(0,l.useMemo)(()=>!w&&!h&&!F,[h,F,w])),{fileActions:en,files:er,folderActions:ei,isLoading:eg,updateFiles:eb}=(0,es.A)(D,N,et,{hideFolders:t,hideLoading:s,isDesktop:h,skipFsWatcher:E,skipSorting:C}),{lstat:ev,mountFs:ey,rootFs:ex}=(0,m.f)(),{StyledFileEntry:ek,StyledFileManager:eA}=Y.o[O],{isSelecting:eE,selectionRect:eS,selectionStyling:eM,selectionEvents:eC}=((e,t,{blurEntry:n},r)=>{let[i,a]=(0,l.useState)(()=>Object.create(null)),[o,s]=(0,l.useState)(()=>Object.create(null)),{x:c,y:u}=i,{height:d,width:f}=o,m=(0,l.useRef)(0),p=(0,l.useRef)(o),g=({clientX:t,clientY:n})=>{if(m.current)return;let{scrollLeft:r=0,scrollTop:i=0}=e.current||{},{x:a=0,y:o=0}=e.current?.getBoundingClientRect()||{};s({height:n-o-(u||0)+i,width:t-a-(c||0)+r}),m.current=window.requestAnimationFrame(()=>{m.current=0})},{menu:b,setMenu:h}=(0,T.b)(),w="number"==typeof c&&"number"==typeof u,v="number"==typeof f&&"number"==typeof d&&w&&0===Object.keys(b).length,y={isSelecting:v,selectionEvents:{onMouseDown:({clientX:r,clientY:i,target:o})=>{if(o!==e.current)return;let{scrollLeft:l=0,scrollTop:c=0}=e.current,{x:u=0,y:d=0}=e.current.getBoundingClientRect();s(Object.create(null)),a({x:r-u+l,y:i-d+c}),b&&Object.keys(b).length>0&&h(Object.create(null)),t.length>0&&n()}},selectionStyling:((e,t,n,r,i)=>{if(!e)return Object.create(null);let a=Number(t),o=Number(n);return{height:`${Math.abs(a)}px`,transform:`translate(
        ${Number(r)+Math.min(o,0)}px,
        ${Number(i)+Math.min(a,0)}px)`,width:`${Math.abs(o)}px`}})(v,d,f,c,u)};if(w){let t=()=>{s(Object.create(null)),a(Object.create(null))},n=e.current?.scrollHeight||0,i=e.current?.scrollWidth||0;y.selectionEvents.onMouseLeave=()=>{if(y.isSelecting){let a=t=>{if(g(t),r||!e.current)return;let a=Math.abs(Number(p.current.width))/100+1,o=Math.abs(Number(p.current.height))/100+1;e.current.scrollBy(e.current.scrollLeft+e.current.clientWidth>i?0:Math.round(t.movementX*a),e.current.scrollTop+e.current.clientHeight>n?0:Math.round(t.movementY*o))};window.addEventListener("mousemove",a),window.addEventListener("mouseup",()=>{t(),window.removeEventListener("mousemove",a)},$.w3)}},y.selectionEvents.onMouseMove=g,y.selectionEvents.onMouseUp=t}return v&&(y.selectionRect=Object.assign(Object.create(null),i,o),p.current=o),y})(X,J,et,h),ej=((e,{focusEntry:t},r,i,a,s)=>{let{exists:c}=(0,m.f)(),{iconPositions:u,sortOrders:d,setIconPositions:f}=(0,j.w)(),p=(0,l.useRef)(null),b=(0,l.useRef)(!1),h=(0,l.useRef)({x:0,y:0}),w=(0,l.useRef)(Object.create(null)),v=(0,l.useCallback)(({clientX:e,clientY:t})=>{w.current={...w.current,x:e,y:t}},[]),y=r.current?.parentElement?.tagName==="MAIN",x=(0,l.useCallback)(async()=>{if(r.current){let e=[...r.current.querySelectorAll(".focus-within")];if((0,g.t3)(e.length,s)){p.current?p.current.src="":p.current=new Image;let t=await (0,g.em)();if(!t)return;try{let{UNKNOWN_ICON:i}=await n.e(8362,"high").then(n.bind(n,18362)),a=e.every(({style:e})=>e?.gridRowStart&&e?.gridColumnStart),o=await t?.toCanvas(r.current,{filter:t=>!(t instanceof HTMLSourceElement)&&e.some(e=>e.contains(t)),imagePlaceholder:i,skipAutoScale:!0}),l=a?(0,g.Aq)(o):o;p.current.src=l.toDataURL(),h.current={x:o.width-l.width,y:o.height-l.height}}catch{}}}},[r,s]),k=(0,l.useCallback)(t=>n=>{(0,g.CH)(n),a&&e.length>0&&((0,g.$Y)(t,r.current,u,d,w.current,e,f,c),r.current?.removeEventListener("dragover",v),setTimeout(()=>{b.current=!1,x()},$.UW.MOUSE_IN_OUT/2))},[a,c,r,e,u,v,f,d,x]),A=(0,l.useCallback)((n,i,l)=>c=>{if(l||"ontouchstart"in window)return void(0,g.CH)(c);t(i);let u=e.length<=1;if(c.nativeEvent.dataTransfer?.setData("application/json",JSON.stringify(u?[(0,o.join)(n,i)]:e.map(e=>(0,o.join)(n,e)))),u&&c.nativeEvent.dataTransfer?.setData("DownloadURL",`${(0,g.hH)(i)||"application/octet-stream"}:${i}:${window.location.origin}${encodeURI((0,o.join)(n,i))}`),p.current&&(0,g.t3)(e.length,s)){if(!b.current){b.current=!0;let e=h.current.x||h.current.y;h.current={x:e?c.nativeEvent.clientX-h.current.x:c.nativeEvent.offsetX,y:e?c.nativeEvent.clientY-h.current.y:c.nativeEvent.offsetY+5}}c.nativeEvent.dataTransfer?.setDragImage(p.current,y?h.current.x:c.nativeEvent.offsetX,y?h.current.y:c.nativeEvent.offsetY)}Object.assign(c.dataTransfer,{effectAllowed:"move"}),a&&(w.current=(0,g.t3)(e.length,s)?{offsetX:c.nativeEvent.offsetX,offsetY:c.nativeEvent.offsetY}:Object.create(null),r.current?.addEventListener("dragover",v,{passive:!0})),c.nativeEvent.dataTransfer&&(c.nativeEvent.dataTransfer.effectAllowed="move")},[a,r,t,e,s,y,v]);return(0,l.useEffect)(()=>{!i&&(0,g.t3)(e.length,s)?x():0===e.length&&(b.current=!1)},[e,s,i,x]),(e,t,n)=>({draggable:!0,onDragEnd:k(e),onDragStart:A(e,t,n),style:y?u[(0,o.join)(e,t)]:void 0})})(J,et,X,eE,e,h),ez=(0,q.A)({callback:ei.newPath,directory:D,updatePositions:e}),e$=((e,{addToFolder:t,newPath:a,pasteToFolder:s,sortByOrder:[[c,u],d]},f,p)=>{let{contextMenu:h}=(0,T.b)(),{exists:w,mapFs:v,pasteList:y={},readFile:x,rootFs:k,writeFile:A,updateFolder:E}=(0,m.f)(),{iconPositions:C,setForegroundId:D,setWallpaper:R,setIconPositions:H,sortOrders:O,updateRecentFiles:F,wallpaperImage:L}=(0,j.w)(),{minimize:W,open:B}=(0,M.N)(),P=(0,l.useCallback)((t,n)=>{H(t=>Object.fromEntries(Object.entries(t).filter(([t])=>(0,o.dirname)(t)!==e))),d(""===t?([e])=>[e,n]:((e,t)=>([n,r])=>[e,n===e?!r:t])(t,n))},[H,d,e]),I=(0,l.useMemo)(()=>f&&"function"==typeof navigator?.mediaDevices?.getDisplayMedia&&(window?.MediaRecorder?.isTypeSupported(em)||window?.MediaRecorder?.isTypeSupported(ep)),[f]),N=(0,l.useCallback)(async()=>{if(i&&r){let{active:e}=r;try{i.requestData(),r.getTracks().forEach(e=>e.stop())}catch{}if(i=void 0,r=void 0,e)return}let e=(0,g.gm)()||(0,g.nr)(),t={video:{frameRate:30},...!e&&{preferCurrentTab:!0,selfBrowserSurface:"include",surfaceSwitching:"include",systemAudio:"include"}},[a]=(r=await navigator.mediaDevices.getDisplayMedia(t)).getVideoTracks(),{height:l,width:s}=a.getSettings(),c=MediaRecorder.isTypeSupported(em),u=`Screen Capture ${(0,g.Im)()}.${c?"webm":"mp4"}`;i=new MediaRecorder(r,{bitsPerSecond:l&&s?l*s*30:void 0,mimeType:c?em:ep});let d=(0,o.join)($.Bn,u),f=Date.now(),m=!1;i.start(),i.addEventListener("dataavailable",async t=>{let{data:r}=t;if(r?.size){let t=await (0,g.Z6)(r);if(await A(d,m?ed.concat([await x(d),t]):t,m),!c||e||i&&"inactive"!==i.state)E($.Bn,u);else{let{default:e}=await n.e(667,"high").then(n.t.bind(n,667,23));e((0,g.vJ)(await x(d)),Date.now()-f,async e=>{await A(d,await (0,g.Z6)(e),!0),E($.Bn,u)})}m=!0}})},[x,E,A]),U=(0,eu._)(),G=(0,z.w)(),Q=(0,l.useCallback)((e,t)=>{if(t&&f){let{clientX:n,clientY:r}="TouchEvent"in window&&t.nativeEvent instanceof TouchEvent?t.nativeEvent.touches[0]:t.nativeEvent;(0,g.$Y)($.Bn,t.target,C,O,{x:n,y:r},e,H,w)}},[w,C,f,H,O]),V=(0,l.useCallback)(async(e,t,n)=>a(e,t,"rename",e=>Q([e],n)),[a,Q]);return(0,l.useMemo)(()=>h?.(n=>{let{offsetX:i,offsetY:a,target:l}=n.nativeEvent;if(!f&&!p&&i>l.clientWidth)return[{action:()=>{let e=0;a>l.clientHeight-17?e=l.scrollHeight:a>17&&(e=Math.round(l.scrollHeight*(a-34)/(l.clientHeight-34))),l.scrollTo({behavior:"instant",top:e})},label:"Scroll Here"},$.kG,{action:()=>{l.scrollTo({behavior:"instant",top:0})},label:"Top"},{action:()=>{l.scrollTo({behavior:"instant",top:l.scrollHeight})},label:"Bottom"},$.kG,{action:()=>{l.scrollBy({behavior:"instant",top:-l.clientHeight})},label:"Page Up"},{action:()=>{l.scrollBy({behavior:"instant",top:l.clientHeight})},label:"Page Down"},$.kG,{action:()=>{l.scrollBy({behavior:"instant",top:-44})},label:"Scroll Up"},{action:()=>{l.scrollBy({behavior:"instant",top:44})},label:"Scroll Down"}];let d=[{action:()=>t().then(e=>Q(e,n)),label:"Add file(s)"},...(0,g.AQ)()?[{action:()=>v(e).then(t=>{Q([t],n),E(e,t),B("FileExplorer",{url:(0,o.join)(e,t)})}).catch(()=>{}),label:"Map directory"}]:[]],m=document.querySelector("main .webamp-desktop canvas")instanceof HTMLCanvasElement,h=(0,b.Lv)(e,k?.mntMap||{}),x=$.jj.has((0,g.uQ)(e))||h&&!(0,b.tV)(k?.mntMap[h]),M=f&&Object.keys(C).some(t=>(0,o.dirname)(t)===e);return[{label:"Sort by",menu:[{action:()=>P("name",!0),label:"Name",toggle:!M&&"name"===c},{action:()=>P("size",!1),label:"Size",toggle:!M&&"size"===c},{action:()=>P("type",!0),label:"Item type",toggle:!M&&"type"===c},{action:()=>P("date",!1),label:"Date modified",toggle:!M&&"date"===c},...M?[]:[$.kG,{action:()=>P("",!0),label:"Ascending",toggle:u},{action:()=>P("",!1),label:"Descending",toggle:!u}]]},{action:()=>E(e),label:"Refresh"},...f?[$.kG,{label:"Background",menu:ec.f$.filter(({requiresWebGPU:e})=>!e||U).reduce((e,{hasAlt:t=!0,id:n,name:r})=>[...e,{action:()=>{m&&ef(),R(`${n}${t&&L.startsWith(n)&&!L.endsWith(" ALT")?" ALT":""}`)},label:r||n,toggle:t?L.startsWith(n):L===n}],m?[{action:ef,checked:!0,label:"Music Visualization"},$.kG]:[])},...I?[{action:N,label:r?.active?"Stop screen capture":"Capture screen"}]:[]]:[],...x?[]:[$.kG,...d,{action:()=>B("Terminal",{url:e}),label:"Open Terminal here"},$.kG,{action:()=>s(n),disabled:0===Object.keys(y).length,label:"Paste"},$.kG,{label:"New",menu:[{action:()=>V("New folder",void 0,n),icon:$.tz,label:"Folder"},$.kG,{action:()=>V("New Rich Text Document.whtml",ed.from(""),n),icon:(0,S.QW)(".whtml"),label:"Rich Text Document"},{action:()=>V("New Text Document.txt",ed.from(""),n),icon:(0,S.QW)(".txt"),label:"Text Document"}]},...f?[]:[$.kG,{action:()=>{let t=Object.keys(G.current).find(t=>t===`Properties${$.QB}${e}`);t?(G.current[t].minimized&&W(t),D(t)):B("Properties",{url:e})},label:"Properties"}]],...f?[$.kG,{action:async()=>{if(!await w($.K$)){let e=await fetch(document.location.href),t=ed.from(await e.arrayBuffer());await A($.K$,t),E((0,o.dirname)($.K$),(0,o.basename)($.K$))}B("MonacoEditor",{url:$.K$}),F($.K$,"MonacoEditor")},label:"View page source"},{action:()=>B("DevTools",{url:"dom"}),label:"Inspect"}]:[]]}),[t,I,N,h,w,U,C,u,f,p,v,W,V,B,y,s,G,k?.mntMap,D,R,c,Q,E,F,P,e,L,A])})(D,ei,h,w),eD=(0,l.useMemo)(()=>!s&&(eg||D!==B),[B,s,eg,D]),eR=(0,l.useCallback)(e=>{H(t=>({...t,[D]:e})),W("details"===e?x:void 0)},[H,D]),eH=((e,t,n,r,{blurEntry:i,focusEntry:a},{newPath:s,pasteToFolder:c},u,d,f,p,b,h)=>{let{copyEntries:w,deletePath:v,moveEntries:y}=(0,m.f)(),{open:x,url:k}=(0,M.N)(),{openTransferDialog:A}=(0,G.A)(),{foregroundId:E,setIconPositions:S}=(0,j.w)();return(0,l.useEffect)(()=>{let e=e=>{e.clipboardData?.files?.length&&(!E&&b||E===f)&&(e.stopImmediatePropagation?.(),(0,el.L3)(e.clipboardData.files,t,s).then(A))};return document.addEventListener("paste",e),()=>document.removeEventListener("paste",e)},[E,f,b,s,A,t]),(0,l.useCallback)(l=>s=>{if(p)return;let{altKey:m,ctrlKey:A,key:E,target:M,shiftKey:C}=s;if(C){if(A&&!b){let e=e=>{h?.(e),requestAnimationFrame(()=>d.current?.focus($.VD))};switch(E){case"#":e("icon");break;case"^":e("details")}}return}let j=()=>{n.length>0&&((0,g.CH)(s),t===$.Bn&&(0,g.Rp)(S),n.forEach(async e=>{let n=(0,o.join)(t,e);await v(n)&&u(void 0,n)}),i())};if(A)switch(E.toLowerCase()){case"a":if((0,g.CH)(s),M instanceof HTMLOListElement){let[e]=M.querySelectorAll("button");e?.focus($.VD)}Object.keys(e).forEach(e=>a(e));break;case"c":(0,g.CH)(s),w(n.map(e=>(0,o.join)(t,e)));break;case"d":j();break;case"r":(0,g.CH)(s),u();break;case"x":(0,g.CH)(s),y(n.map(e=>(0,o.join)(t,e)));break;case"v":s.stopPropagation(),M instanceof HTMLOListElement&&c()}else if(m)"n"===E.toLowerCase()?((0,g.CH)(s),x("FileExplorer",{url:t})):"Enter"===E&&n.length>0&&((0,g.CH)(s),x("Properties",{url:(0,o.join)(t,n[0])}));else switch(E){case"F2":n.length>0&&l&&((0,g.CH)(s),r(l));break;case"F5":f&&((0,g.CH)(s),u());break;case"Delete":j();break;case"Backspace":f&&((0,g.CH)(s),k(f,(0,o.dirname)(t)));break;case"Enter":n.length>0&&M instanceof HTMLButtonElement&&((0,g.CH)(s),(0,g.k2)(M,2));break;default:if(E.startsWith("Arrow")){if((0,g.CH)(s),!(M instanceof HTMLElement))return;let e=M;if(!(M instanceof HTMLButtonElement)&&!(e=M.querySelector("button")))return;let{x:t,y:n,height:r,width:i}=e.getBoundingClientRect(),a="ArrowUp"===E||"ArrowDown"===E?document.elementFromPoint(t,n+r/2+("ArrowUp"===E?-r:r)):document.elementFromPoint(t+i/2+("ArrowLeft"===E?-i:i),n);if(a instanceof HTMLOListElement){let t=e.closest("li");if(t instanceof HTMLLIElement){let e=[...a.children],n=e.indexOf(t);("ArrowUp"===E||"ArrowDown"===E)&&(a=e["ArrowUp"===E?0===n?e.length-1:n-1:n===e.length-1?0:n+1].querySelector("button"))}}let o=a?.closest("button"),l=o;o instanceof HTMLButtonElement&&d.current?.contains(o)||(l=e),l?.dispatchEvent(new MouseEvent("mousedown",{bubbles:!0}))}else if(/^[\da-z]$/i.test(E)){(0,g.CH)(s);let t=Object.keys(e),r=t.indexOf(n[n.length-1]),o=E.toLowerCase(),l=E.toUpperCase(),c=[...t.slice(r),...t.slice(0,r)].find(e=>!n.includes(e)&&(e.startsWith(o)||e.startsWith(l)));if(c){i(),a(c);try{d.current?.querySelector(`button[aria-label='${CSS.escape(c.replace($.b3,""))}']`)?.scrollIntoView()}catch{}}}}},[i,k,w,v,d,e,a,n,f,b,p,y,x,c,S,r,h,u,t])})(er,D,J,N,et,ei,eb,X,p,w,h,eR),[eT,eO]=(0,l.useState)("prompt"),eF=(0,l.useRef)(!1),eL=(0,l.useRef)(!1),eW=(0,l.useMemo)(()=>""===I?eH():void 0,[eH,I]),eB=(0,l.useMemo)(()=>Object.keys(er),[er]),eP=(0,l.useMemo)(()=>eB.slice(0,V),[eB,V]),eI=(0,l.useMemo)(()=>eB.slice(V),[eB,V]),eN=(0,l.useMemo)(()=>!h&&!w&&!eD&&0===eB.length,[eB.length,h,w,eD]);return(0,l.useEffect)(()=>{K(40)},[D]),(0,l.useEffect)(()=>{if(0===eI.length||eD||h||w)return;let e=new IntersectionObserver(e=>{e[0]?.isIntersecting&&K(e=>Math.min(e+50,eB.length))},{root:X.current,rootMargin:"100px",threshold:.1});return _.current=e,Z.current&&e.observe(Z.current),()=>{_.current&&(_.current.disconnect(),_.current=null)}},[eI.length,eD,h,w,eB.length]),(0,l.useEffect)(()=>{eF.current||"granted"===eT||ex?.mntMap[B]?.getName()!=="FileSystemAccess"||(eF.current=!0,n.e(9345,"high").then(n.bind(n,79345)).then(({requestPermission:e})=>e(B).then(e=>{let t="granted"===e;(!e||t)&&(eO("granted"),t&&eb())}).catch(e=>{e?.message==="Permission already granted"&&eO("granted")}).finally(()=>{eF.current=!1})))},[B,eT,ex?.mntMap,eb]),(0,l.useEffect)(()=>{!U&&$.jj.has((0,g.uQ)(D))&&(async()=>{(await ev(D)).isDirectory()||Q(e=>(e||ey(D).then(()=>setTimeout(eb,1)).catch(()=>{}),!0))})()},[ev,ey,U,eb,D]),(0,l.useEffect)(()=>{D!==B&&(ei.resetFiles(),P(D),eO("denied"),K(40))},[B,ei,D]),(0,l.useEffect)(()=>{eL.current||eD||h||w||(X.current?.focus($.VD),eL.current=!0)},[h,w,eD]),(0,l.useEffect)(()=>{W(F?x:void 0)},[F]),(0,a.jsxs)(a.Fragment,{children:[eD&&(0,a.jsx)(u.A,{$hasColumns:F}),!eD&&eN&&(0,a.jsx)(ew,{$hasColumns:F}),(0,a.jsxs)(eA,{ref:X,$isEmptyFolder:eN,$scrollable:!c,onKeyDownCapture:eD?void 0:eW,...eD||k?{onContextMenu:g.CH}:{$selecting:eE,...ez,...e$,...eC},...$.W8,children:[F&&L&&(0,a.jsx)(eh,{columns:L,directory:D,files:er,setColumns:W}),!eD&&(0,a.jsxs)(a.Fragment,{children:[eE&&(0,a.jsx)(eo.A,{style:eM}),eP.map(e=>(0,a.jsx)(ek,{$desktop:h,$selecting:eE,$visible:!eg,...!k&&ej(D,e,I===e),...""===I&&{onKeyDown:eH(e)},...ee(e),children:(0,a.jsx)(ea,{columns:L,fileActions:en,fileManagerId:p,fileManagerRef:X,focusFunctions:et,focusedEntries:J,hasNewFolderIcon:w,hideShortcutIcon:f,isDesktop:h,isHeading:h&&er[e].systemShortcut,isLoadingFileManager:eg,loadIconImmediately:y||V<=40,name:(0,o.basename)(e,$.b3),path:(0,o.join)(D,e),readOnly:k,renaming:I===e,selectionRect:eS,setRenaming:N,stats:er[e],view:O})},e)),eI.length>0&&!h&&!w&&(0,a.jsx)("div",{ref:Z,style:{height:"1px",width:"100%",visibility:"hidden"}})]})]}),A&&(0,a.jsx)(v,{count:eD?0:eB.length,directory:D,fileDrop:ez,selected:J,setView:eR,view:O})]})})}}]);