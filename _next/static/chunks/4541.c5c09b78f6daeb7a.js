"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4541],{74541:(e,t,r)=>{r.d(t,{cursorToCss:()=>w,decodeImageToBuffer:()=>b});var a=r(65266),n=r(82909).Buffer;function i(e,t=[]){let{length:r}=t,a=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)].concat(t);return[r>>24&255,r>>16&255,r>>8&255,255&r].concat(a,function(e){let t=[],r=0;for(let e=0;e<256;++e)r=1&(r=1&(r=1&(r=1&(r=1&(r=1&(r=1&(r=1&(r=e)?0xedb88320^r>>>1:r>>>1)?0xedb88320^r>>>1:r>>>1)?0xedb88320^r>>>1:r>>>1)?0xedb88320^r>>>1:r>>>1)?0xedb88320^r>>>1:r>>>1)?0xedb88320^r>>>1:r>>>1)?0xedb88320^r>>>1:r>>>1)?0xedb88320^r>>>1:r>>>1,t[e]=r;for(let a of(r=-1,e))r=r>>>8^t[(r^a)&255];return[(r^=-1)>>24&255,r>>16&255,r>>8&255,255&r]}(a))}var s=r(4622),u=r(82909).Buffer;let l=async e=>{let t=document.createElement("img");return document.createElement("picture").append(Object.assign(document.createElement("source"),{srcset:"data:,x",type:e}),t),await new Promise(e=>{requestAnimationFrame(e)}),"string"==typeof t.currentSrc&&t.currentSrc.length>0},c=async e=>await l("image/jxl")?e:new Promise(t=>{let r=new Worker("System/JXL.js/jxl_dec.js",{name:"JXL.js"});r.postMessage({image:e,jxlSrc:"image.jxl"}),r.addEventListener("message",e=>{t((0,s.Jf)(e?.data?.imgData)),r.terminate()})}),h=async e=>await l("image/heic")?e:new Promise(t=>{let a=new Worker(r.tu(new URL(r.p+r.u(5296),r.b)),{name:"libheif"});a.postMessage(e),a.addEventListener("message",({data:e})=>{t((0,s.Jf)(e)),a.terminate()})}),o=async e=>{let t=await (0,s.iI)(),{parseAni:n}=await r.e(5162,"high").then(r.bind(r,35162)),i=[],l={};try{({images:i,metadata:l}=n(e))}catch{return e}return await Promise.all(i.map(e=>new Promise(r=>{let n=new Image,i=(0,s.Zd)(u.from(e));t.setOptions({transparent:""}),n.addEventListener("load",()=>{t.addFrame(n,{delay:(l.iDispRate||10)/60*1e3}),(0,s.E)(i),r()},a.w3),n.src=i}))),new Promise(e=>{t.on("finished",r=>{(0,s.Z6)(r).then(e),t.freeWorkers.forEach(e=>e?.terminate())}).render()})},d=async e=>{let t,{parseAni:a}=await r.e(5162,"high").then(r.bind(r,35162));try{return{images:[t]}=a(e),u.from(t)}catch{}},f=e=>`*, *::before, *::after { cursor: url(${e}), default !important; }`,m=async(e,t)=>{let{parseAni:a}=await r.e(5162,"high").then(r.bind(r,35162)),{metadata:n,images:i}=a(e),l=e=>(0,s.Zd)(u.from(e),t);if(1===i.length)return f(l(i[0]));if(i.length>1){let e=`cursor-ani-${Date.now()}`,t=`
      @keyframes ${e} {
        ${i.map((e,t)=>`${(t/i.length*100).toFixed(1)}% { cursor: url(${l(e)}), default; }`).join("")}
        100% { cursor: url(${l(i[0])}), default; }
      }
    `,r=Math.ceil((n.iDispRate||10)/60*i.length*1e3);return`${t}* { animation: ${e} ${r}ms infinite steps(1) !important; }`}return""},p=async(e,t)=>{try{let{default:a}=await r.e(5473,"high").then(r.t.bind(r,85473,23)),[n]=a(e).filter(({width:e})=>e<=t).sort((e,t)=>t.width-e.width),i=document.createElement("canvas"),s=i.getContext("2d",{desynchronized:!0});return i.width=n.width,i.height=n.height,s?.putImageData(n,0,0),i.toDataURL()}catch{return""}},w=async(e,t)=>{if(".ani"===(0,s.uQ)(t)){let r=await m(e,(0,s.hH)(t));if(r)return r}return f(await p(e,128)||(0,s.Zd)(e,(0,s.hH)(t)))},g=async(e,t)=>new Promise(r=>{let n=new Image;n.addEventListener("load",()=>r(!0),a.w3),n.addEventListener("error",()=>r(!1),a.w3),n.src=(0,s.Zd)(t,(0,s.hH)("",e))}),b=async(e,t)=>{switch(e){case".jxl":return c(t);case".qoi":return n.from(new Uint8Array(function(e){if(e.length<22||113!==e[0]||111!==e[1]||105!==e[2]||102!==e[3])return;let t=e[4]<<24|e[5]<<16|e[6]<<8|e[7],r=e[12],a=e[13];if(3!==r&&4!==r&&1!==a)return;let n=e.length-8,s=[],u=Array.from({length:64}).fill(0),l=255,c=14;for(;c<n;){let t=e[c],r=t>>6;if(255===t){let t=e[c+1],r=e[c+2],a=e[c+3],n=e[c+4];c+=5,l=t<<24|r<<16|a<<8|n,u[(3*t+5*r+7*a+11*n)%64]=l,s.push(l)}else if(254===t){let t=e[c+1],r=e[c+2],a=e[c+3],n=255&l;c+=4,l=t<<24|r<<16|a<<8|n,u[(3*t+5*r+7*a+11*n)%64]=l,s.push(l)}else if(0===r){if(0===e[c]&&0===e[c+1]&&0===e[c+2]&&0===e[c+3]&&0===e[c+4]&&0===e[c+5]&&0===e[c+6]&&1===e[c+7])break;c+=1,l=u[t],s.push(l)}else if(1===r){let e=(l>>24&255)+((t>>4&3)-2)&255,r=(l>>16&255)+((t>>2&3)-2)&255,a=(l>>8&255)+((3&t)-2)&255,n=255&l;c+=1,l=e<<24|r<<16|a<<8|n,u[(3*e+5*r+7*a+11*n)%64]=l,s.push(l)}else if(2===r){let r=e[c+1],a=(63&t)-32&255,n=(r>>4&15)-8+a&255,i=(15&r)-8+a&255,h=(l>>24&255)+n&255,o=(l>>16&255)+a&255,d=(l>>8&255)+i&255,f=255&l;c+=2,l=h<<24|o<<16|d<<8|f,u[(3*h+5*o+7*d+11*f)%64]=l,s.push(l)}else{for(let e=(63&t)+1;e>0;--e)s.push(l);c+=1}}return function(e,t,r){let a=[],n=[120,1],s=1+t*r,u=65535^s;for(let i=0;e.length!=i;i+=t){let l=i+t;n.push(+(l===e.length),255&s,s>>8&255,255&u,u>>8&255),a.push(1),n.push(0);for(let t=i;l!==t;++t){let i=e[t];a.push(i>>24&255),n.push(i>>24&255),a.push(i>>16&255),n.push(i>>16&255),a.push(i>>8&255),n.push(i>>8&255),4===r&&(a.push(255&i),n.push(255&i))}}let l=e.length/t;return[137,80,78,71,13,10,26,10].concat(i("IHDR",[t>>24&255,t>>16&255,t>>8&255,255&t,l>>24&255,l>>16&255,l>>8&255,255&l,8,3===r?2:6,0,0,0]),i("IDAT",n.concat(function(e){let t=0,r=0;for(let a of e)r=(r+(t=(t+a)%65521))%65521;return[r>>8,255&r,t>>8,255&t]}(a))),i("IEND"))}(s,t,r)}(new Uint8Array(t))));case".ani":try{return await o(t)}catch{return d(t)}case".cur":return await g(e,t)?t:d(t);default:if(a.U7.has(e))return h(t);if(a.lp.has(e))return u.from((await r.e(1081,"high").then(r.t.bind(r,71081,23))).bufferToURI(t).replace("data:image/png;base64,",""),"base64")}return t}}}]);