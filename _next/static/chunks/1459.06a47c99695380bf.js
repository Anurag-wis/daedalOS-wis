"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1459],{1459:(t,e,i)=>{i.d(e,{Cg:()=>l,G9:()=>b,Lz:()=>u,OM:()=>c,Ol:()=>S,QP:()=>m,Zl:()=>T,b3:()=>x,bz:()=>p,createM3uPlaylist:()=>k,d7:()=>O,eu:()=>f,hN:()=>E,p3:()=>_,tracksFromPlaylist:()=>D,u7:()=>w,yK:()=>d});var r=i(5696),a=i(65266),o=i(4622);let n=new Set(["Flexi - alien fish pond","Geiss - Spiral Artifact"]),s=`${a.yZ}/Documents/Winamp Skins`,l={availableSkins:[{name:"Aqua X",url:`${s}/Aqua_X.wsz`},{name:"Nucleo NLog v2G",url:`${s}/Nucleo_NLog_v102.wsz`},...["localhost",a.sx.author.url.replace("https://","")].includes(window.location.hostname)?[{defaultName:"Random (Winamp Skin Museum)",loading:!1,get name(){let t;if(this.loading)return this.defaultName;return this.loading=!0,fetch("https://api.webamp.org/graphql",{body:JSON.stringify({query:(t=Math.floor(1e3*Math.random()),`
  query {
    skins(filter: APPROVED, first: 1, offset: ${t}) {
      nodes {
        download_url
      }
    }
  }
`)}),headers:{"Content-Type":"application/json"},method:"POST"}).then(async t=>{let{data:e}=await t.json()||{};this.skinUrl=e?.skins?.nodes?.[0]?.download_url,this.loading=!1}),this.defaultName},skinUrl:"",get url(){return this.skinUrl||`${s}/base-2.91.wsz`}}]:[],{name:"SpyAMP Professional Edition v5",url:`${s}/SpyAMP_Professional_Edition_v5.wsz`}]},h={height:116,width:275},p="#main-window",d="#playlist-window",m=(t,e="")=>t.skinIsLoaded().then(()=>{e&&(0,o.E)(e)}),u=t=>{t.store.dispatch({type:"CLOSE_WINDOW",windowId:"equalizer"})},c=t=>{t.store.dispatch({open:!1,type:"ENABLE_MILKDROP"})},w=(t,e)=>{t.store.dispatch({data:e,type:"SET_SKIN_DATA"})},g=t=>{let{presetHistory:e=[],presets:i=[]}=t.store.getState()?.milkdrop||{},r=Math.floor(Math.random()*i.length),a=i[r];return!a.name||n.has(a.name)||e.slice(-5).includes(r)?g(t):r},f=t=>{let e=g(t);t.store.dispatch({addToHistory:!0,index:e,type:"PRESET_REQUESTED"}),t.store.dispatch({index:e,type:"SELECT_PRESET_AT_INDEX"})},y=0,b=t=>{let e=t.store.subscribe(()=>{let{milkdrop:r,windows:a}=t.store.getState();a?.genWindows?.milkdrop?.open&&!r?.butterchurn&&(0,o.aY)(["/Program Files/Webamp/butterchurn.min.js"]).then(()=>{var r;if(!window.butterchurn?.default)return;r=window.butterchurn.default,t.store.dispatch({butterchurn:r,type:"GOT_BUTTERCHURN"});let{playlist:o,main:n}=a.genWindows||{},{x:s=0,y:l=0}=(o?.open?o?.position:n?.position)||{};t.store.dispatch({positions:{milkdrop:{x:s,y:l+h.height}},type:"UPDATE_WINDOW_POSITIONS"}),e(),t.store.subscribe(()=>{let t=[...document.body.children].find(t=>t.classList?.contains("webamp-desktop"));if(t){let e=document.querySelector("main");e&&([...e.children].forEach(t=>{t.classList?.contains("webamp-desktop")&&t.remove()}),e.append(t))}}),i.e(2756,"high").then(i.t.bind(i,2354,23)).then(({default:e})=>{let i=Object.entries(e).map(([t,e])=>({name:t,preset:e}));t.store.dispatch({presets:i,type:"GOT_BUTTERCHURN_PRESETS"}),f(t),(t=>{window.clearInterval(y),y=window.setInterval(()=>{t||window.clearInterval(y),f(t)},2e4)})(t)})})})},x=()=>document.querySelector("#webamp"),T=(t,e)=>{let{height:i,width:a}=h,{x:o,y:n}=e||(0,r.r_)({height:2*i,width:a});t.store.dispatch({positions:{main:{x:o,y:n},milkdrop:{x:0-a,y:0-i},playlist:{x:o,y:i+n}},type:"UPDATE_WINDOW_POSITIONS"})},E=(t,e)=>t.store.dispatch({type:"SET_FOCUSED_WINDOW",window:e}),S=t=>t.store.dispatch({type:"SET_FOCUSED_WINDOW",window:""}),_=async(t,e)=>{let{parseBuffer:r}=await Promise.all([i.e(6447,"high"),i.e(2033,"high"),i.e(4147,"high")]).then(i.bind(i,62033)),{common:{album:n="",artist:s="",title:l=e},format:{duration:h=0}}=await r(t,{mimeType:a.fq,size:t.length},{duration:!0,skipCovers:!0,skipPostHeaders:!0});return{blob:(0,o.vJ)(t,"audio/mpeg"),duration:Math.floor(h),metaData:{album:n,artist:s,title:l}}},k=t=>{let e=t.map(t=>{let e=t.url?`
${t.url}`:"",i=t.defaultName;return t.metaData?.artist?t.metaData?.title?i=`${t.metaData.artist} - ${t.metaData.title}`:i&&(i=`${t.metaData.artist} - ${i}`):t.metaData?.title&&(i=t.metaData.title),e?`#EXTINF:${t.duration??-1},${i||""}${e}`:""});return`${["#EXTM3U",...e.filter(Boolean)].join("\n")}
`},D=async(t,e,r)=>{let{ASX:a,M3U:o,PLS:n}=await i.e(1126,"high").then(i.t.bind(i,11126,23));return(({".asx":a,".m3u":o,".pls":n})[e]?.parse(t).filter(Boolean).slice(0,1e3)??[]).map(({artist:t="",file:e="",length:i=0,title:a=""})=>{let[o,n]=[t.trim(),a.trim()];return{duration:Math.max(i,0),metaData:{album:n||r,artist:o,title:n},url:e}})},M=(t="")=>t.replace(/<!\[CDATA\[|\]\]>/g,""),N={"somafm.com":t=>async()=>{let{pathname:e}=new URL(t),[i]=e.replace("/","").split("-"),r=await (await fetch(`https://somafm.com/songs/${i}.xml`,{cache:"no-cache",credentials:"omit",keepalive:!1,mode:"cors",referrerPolicy:"no-referrer",window:null})).text(),a=new DOMParser().parseFromString(r,"application/xml").querySelector("song"),o=a?.querySelector("artist")?.innerHTML,n=a?.querySelector("title")?.innerHTML;return{artist:M(o),title:M(n)}}},O=t=>{let{host:e}=new URL(t),[,i,r]=e.split(".");return N[`${i}.${r}`]?.(t)}},5696:(t,e,i)=>{i.d(e,{Gn:()=>n,Ve:()=>h,WZ:()=>p,Xc:()=>l,r_:()=>s});var r=i(68660),a=i(65266),o=i(4622);let n=(t,e,i=[],r=0)=>{let[n]=t.split(a.QB),s=`${n}${a.QB}`,l=i.find(t=>t.startsWith(s))||"",{componentWindow:h}=e?.[l]||{},{x:p=0,y:d=0,width:m=0,height:u=0}=h?.getBoundingClientRect()||{};return!(p+r+m>(0,o.e8)()||d+r+u>(0,o.Bv)())&&(p||d)?{x:p+r,y:d+r}:void 0},s=({height:t,width:e})=>{let[i,r]=[(0,o.Bv)(),(0,o.e8)()];return{x:Math.floor(r/2-(0,o.kl)(e)/2),y:Math.floor((i-a.D5)/2-(0,o.kl)(t)/2)}},l={BOTTOM:15,LEFT:150,RIGHT:50,TOP:15},h=(t,e,i=!1)=>{let{position:r,size:a}=t||{},{x:n=0,y:s=0}=r||{},{height:h=0,width:p=0}=a||{};return i?n+l.RIGHT>e.x||n+(0,o.kl)(p)-l.LEFT<0||s+l.BOTTOM>e.y||s+l.TOP<0:n<0||s<0||n+(0,o.kl)(p)>e.x||s+(0,o.kl)(h)>e.y},p=(t,e)=>{let i=Number(t.height),n=Number(t.width),[s,l]=[(0,o.Bv)(),(0,o.e8)()],h=s-a.D5,p=Math.max(r.WB,Math.min(i,h)),d=Math.max(r.lH,Math.min(n,l));if(!e)return{height:p,width:d};let m=i===p,u=n===d;return m||u?m?u?{height:p,width:d}:{height:Math.round(p/(n/d)),width:d}:{height:p,width:Math.round(d/(i/p))}:i>n?{height:p,width:Math.round(d/(h/p))}:{height:Math.round(p/(l/d)),width:d}}},68660:(t,e,i)=>{i.d(e,{Ay:()=>s,EX:()=>a,Ho:()=>r,WB:()=>o,lH:()=>n});let r={bottom:!1,bottomLeft:!1,bottomRight:!1,left:!1,right:!1,top:!1,topLeft:!1,topRight:!1},a={bottom:!0,bottomLeft:!0,bottomRight:!0,left:!0,right:!0,top:!0,topLeft:!0,topRight:!0},o=30,n=166,s={cancel:".cancel",dragHandleClassName:"handle",enableUserSelectHack:!1,minHeight:`${o}px`,minWidth:`${n}px`,resizeHandleStyles:{bottom:{bottom:"-3px",cursor:"ns-resize",height:"6px"},bottomLeft:{bottom:"-3px",cursor:"nesw-resize",height:"12px",left:"-3px",width:"12px"},bottomRight:{bottom:"-3px",cursor:"nwse-resize",height:"12px",right:"-3px",width:"12px"},left:{cursor:"ew-resize",left:"-3px",width:"6px"},right:{cursor:"ew-resize",right:"-3px",width:"6px"},top:{cursor:"ns-resize",height:"6px",top:"-3px"},topLeft:{cursor:"nwse-resize",height:"12px",left:"-3px",top:"-3px",width:"12px"},topRight:{cursor:"nesw-resize",height:"12px",right:"-3px",top:"-3px",width:"12px"}}}}}]);